<!-- Upload MODAL (DOCUMENT)-->
<div class="modal fade " id="uploadDocument" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable modal-fullscreen-lg-down">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="staticBackdropLabel">Upload Document</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">

				<form class="row g-3 needs-validation" id="form_for_upload_document">
					<div class="col-md-6">
						<label for="Unit" class="form-label small fw-bolder">Unit</label>
						<select class="FORMDATA form-select" id="Unit" required>
							<option>NPCO</option>
							<option>RCU</option>
							<option>PCU</option>
						</select>
						<div class="invalid-feedback">
							Please select a Unit.
						</div>
					</div>

					<div class="col-md-6">
						<label for="Designation" class="form-label small fw-bolder">Designation</label>
						<input type="text" class="FORMDATA form-control" id="Designation" required value="{{user_data['job']}}">
						<div class="invalid-feedback">
							Please provide a Designation.
						</div>
					</div>
					<!-- sadas -->
					<div class="col-md-12">
						<label for="Title" class="form-label form-label-lg small fw-bolder">Title of Document</label>
						<input type="text" class="FORMDATA form-control fw-bolder" id="Title" required>
						<div class="invalid-feedback">
							Please provide a Title of Document.
						</div>
					</div>

					<div class="col-md-4">
						<label for="formCategory" class="form-label small fw-bolder">Category/Topic</label>
						<select class="FORMDATA form-select" id="formCategory" required>
							<option>Accomplishment Report</option>
							<option>Bidding Documents</option>
							<option>Business Plan</option>
							<option>COA Document</option>
							<option>Commercial Partnership Agreement</option>
							<option>Contract</option>
							<option>Detailed Investment Plan</option>
							<option>Documentation</option>
							<option>Farm Plan</option>
							<option>Guide</option>
							<option>IFAD Document</option>
							<option>Financials</option>
							<option>Kit</option>
							<option>Letter</option>
							<option>Marketing Collateral</option>
							<option>Memo</option>
							<option>Memorandum of Agreement</option>
							<option>Memorandum of Understanding</option>
							<option>NEDA Document</option>
							<option>Post-Activity Report</option>
							<option>Presentation</option>
							<option>Project Proposal/Design</option>
							<option>Record</option>
							<option>Report</option>
							<option>RSIP</option>
							<option>Template</option>
							<option>Terms of Reference</option>
							<option>Tool</option>
							<option>Tutorial</option>
							<option>Others</option>
						</select>
						<div class="invalid-feedback">
							Please select a Unit.
						</div>
					</div>
					<script type="text/javascript">
						$(document).on('change', '#formCategory', function(e){  
							e.preventDefault();
							el = $("#OthersForm");
							formCategory = this.value;
							console.log(el)
							if (formCategory == "Others") {
								el.show();

							}
							else {
								el.hide();
							}
						});
					</script>
					<div class="col-md-4" id="OthersForm" style="display: none;">
						<label for="formCategory" class="form-label small fw-bolder">Others:</label>
						<input type="text" name="Others" id="Others" class="FORMDATA form-control" placeholder="please specify">
					</div>

					<div class="col-md-4">
						<label for="Date" class="form-label small fw-bolder">Date Approved</label>
						<input type="date" class="FORMDATA form-control" id="Date" placeholder="Select Date" required>
						<div class="invalid-feedback">
							Please provide a date approve.
						</div>
					</div>

					<div class="col-md-12">
						<label for="Description" class="form-label small fw-bolder">Short Description of Title/Topic/Name of Document</label>
						<textarea class="FORMDATA form-control" id="Description" rows="3"></textarea>
						<div class="invalid-feedback">
							Please provide a Title of Document.
						</div>
					</div>

					<div class="col-md-12">
						<label for="tags" class="form-label small fw-bolder">Tags/Search Keywords</label>
						<input class="FORMDATA form-control" id="tags" rows="3"></input>
						<div class="invalid-feedback">
							Please provide a Title of Document.
						</div>
					</div>

					<div id="">
						<label for="uploadDoc" class="form-label small fw-bolder">Please upload your files</label>
						<input class="FORMDATA form-control" type="file" id="uploadDoc[]" multiple>
					</div>                 


					<div class="col-md-12">
						<label for="Access" class="form-label fw-bolder small">General Access</label>
						<div class="container border border-light rounded-3 ">
							<div class="row d-flex align-items-start mb-2">
								<div class="col-5 mt-3">
									<select class="FORMDATA form-select border-0 fw-bolder bg-light" id="formAccess">
										<option class="text-secondary" value=false >Restricted</option>
										<option class="text-success" value=true >Public</option>
									</select>   
								</div>
								<div class="col-7" id="restrictedDesc" hidden>
									<p class="small text-muted mt-4" id="">Only people who have access can open this file</p>                                                                                           
								</div>
								<div class="col-7" id="PublicDesc" hidden>
									<p class="small text-muted mt-4" id="">Anyone can access this file</p>                                                                                          
								</div>
							</div>
							<!-- Restricted -->
							<div class="mb-3" id="forRestricted" hidden>
								<div class="container mt-2 mb-2">
									<!-- <input type="text" id="accessPeople" class="form-control" placeholder="Add people can access"> -->
									<div class="col-7  autocomplete ">
										<input class="form-control rounded-3" onkeyup="ALL_USERS_SET(this,'users_added_ls_doc')" id="myInput_doc_users" type="text"  placeholder="Add people can access" value="">
									</div>
									<span class="small text-muted">&nbsp or &nbsp</span>
									<div class="col-4  autocomplete">
										<input class="form-control rounded-3" onkeyup="ALL_IMP_SET(this,'users_added_ls_doc')" id="myInput_doc_unit" type="text"  placeholder="Add Unit" value="">
									</div>
									<div class="container">
										<p class="mt-3">People with access</p>
										<!-- Users -->
										<div id="users_added_ls_doc">
										</div>
									</div>
								</div>
							</div>
						</div>
						<script type="text/javascript">
							$(document).on('change', '#formAccess', function(e){  
											// e.preventDefault();
								formAccess = JSON.parse(this.value);

								set_show_doc(formAccess)
							});


							function set_show_doc(true_ba){
								$("#forRestricted").attr("hidden",true_ba)
								$("#restrictedDesc").attr("hidden",true_ba)
								$("#PublicDesc").attr("hidden",!true_ba)
							}

							set_show_doc(false)
						</script>
					</div>

					<div class="col-md-12 d-flex align-items-center" id="email_notification">
						<input class="FORMDATA form-check-input small me-2" type="checkbox" value="" id="formNotification" >
						<label class="form-check-label small text-muted" for="formNotification">
							Receive notifications in your email?
						</label>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
					<button type="button" class="btn btn-primary" onmouseup="submit_file('docs')">Upload</button>
				</div>
		</div>
	</div>
</div>
<script type="text/javascript">

function submit_file(upload_type){
	var FORMDATA = $CLASS('FORMDATA')
	var dataform = {}
	for (var i = 0; i < FORMDATA.length; i++) {
		dataform[FORMDATA[i].id] = FORMDATA[i].value
	}
	dataform["upload_type"] = upload_type
	dataform["uploaded_by"] = {{user_data['id']}}
	var FORM_TO_SUBMIT = $DATA(dataform).appendFileArr($ID('uploadDoc[]'))
	println(FORM_TO_SUBMIT)

	$send({
		action : "/webrep/upload_file_webrep",
		method : POST,
		func : function (rrr){
			var res = JSON.parse(rrr)
		}
	})

}
// appendFileArr()
</script>