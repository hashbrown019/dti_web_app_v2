<style>
    .analyticUpdateTbl th,
    .analyticUpdateTbl td {
        font-size: 10px!important;
    }
    .analyticCard {
        margin: 10px 0px;
    }
    @media screen and (max-width: 599px) {
        .analyticCard {
            margin: 10px 0px;
        }
    }
</style>
<div class="analyticUpdates_container" style="padding: 100px 0px 150px 0px; background-color: #ccc;">
    <h2 class="text-center"><i class="fa fa-bar-chart" style="color:#7B9E3E;"></i> <span style="color:#004450;">Regional Analytic Dashboard</span></h2>
    <hr style="width: 70px; background-color: #7B9E3E; height: 3px; margin: auto; margin-bottom: 50px;">
    <div id="carouselAnalyticUpdates" class="carousel carousel-dark slide" data-bs-ride="carousel">
        <div class="carousel-indicators" style="bottom: -100px;">
            <button type="button" data-bs-target="#carouselAnalyticUpdates" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselAnalyticUpdates" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselAnalyticUpdates" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="container">
                    <h5 class="" style="margin-bottom: 20px; color: #7CA03F!important; font-weight: bold;">
                    <img src="/static/psalm_static/assets/img/icons/Sectors_Smallholder Farmer.png" width="30px" style="margin-right:5px;"/>
                    SMALL HOLDER FARMERS</h5>
                    <div class="row">
                        <div class="col-6 col-lg-2 col-md-6">
                            <div class="card analyticCard">
                                <div class="card-body">
                                <table class="analyticUpdateTbl table table-striped" style="font-size: 10px!important;">
                                    <tbody>
                                        <tr>
                                            <th>TOTAL # OF SHFs</th>
                                            <th class="text-end"><span class="SHF_total">{{ dashboard_data.SHF_Total }}</span></th>
                                        </tr>
                                        <tr>
                                            <th>TOTAL # OF MALE</th>
                                            <th class="text-end"><span class="SHF_total_male">{{ dashboard_data.SHF_Total_Male }}</span></th>
                                        </tr>
                                        <tr>
                                            <th>TOTAL # OF FEMALE</th>
                                            <th class="text-end"><span class="SHF_total_female">{{ dashboard_data.SHF_Total_Female }}</span></th>
                                        </tr>
                                        <tr>
                                            <th>TOTAL # OF IP</th>
                                            <th class="text-end"><span class="SHF_total_ip">{{ dashboard_data.SHF_Total_IP }}</span></th>
                                        </tr>
                                        <tr>
                                            <th>TOTAL # OF YOUTH</th>
                                            <th class="text-end"><span class="SHF_total_youth">{{ dashboard_data.SHF_Total_PWD }}</span></th>
                                        </tr>
                                        <tr>
                                            <th>TOTAL # OF PWD</th>
                                            <th class="text-end"><span class="SHF_total_pwd">{{ dashboard_data.SHF_Total_Youth }}</span></th>
                                        </tr>
                                        <tr>
                                            <th>TOTAL # OF SC</th>
                                            <th class="text-end"><span class="SHF_total_sc">{{ dashboard_data.SHF_Total_SC }}</span></th>
                                        </tr>
                                    </tbody>
                                </table>
                                </div>
                            </div>
                        </div>  
                        <div class="col-6 col-lg-5 col-md-6">
                            <div class="card analyticCard">
                                <div class="card-body">
                                    <div style="width: 100%; margin: auto;">
                                        <canvas id="SHF_region_piechart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6 col-lg-2 col-md-6">
                            <div class="SHF_Comm_Dashboard"></div>
                        </div>
                        <div class="col-6 col-lg-3 col-md-6">
                            <div class="card analyticCard">
                                <div class="card-body">
                                    <div style="width: 100%; margin: auto;">
                                        <canvas id="SHF_HH_Head_barchart" height="300"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="container">
                    <h5 class="" style="margin-bottom: 20px; color: #2C9196!important; font-weight: bold;">
                    <img src="/static/psalm_static/assets/img/icons/Sectors_Farmer Organization.png" width="30px" style="margin-right:5px;"/>
                    FARMER ORGANIZATION </h5>
                    <div class="row">
                        <div class="col-6 col-lg-2 col-md-6">
                            <div class="card analyticCard">
                                <div class="card-body">
                                    <table class="analyticUpdateTbl table table-striped" style="font-size: 10px;">
                                        <tbody>
                                            <tr>
                                                <th>TOTAL # OF FO's</th>
                                                <th class="text-end"><span class="FO_total">{{ dashboard_data.FO_Total }}</span></th>
                                            </tr>
                                            <tr>
                                                <th>TOTAL # OF COOP</th>
                                                <th class="text-end"><span class="FO_total_coop">{{ dashboard_data.FO_Total_Coop }}</span></th>
                                            </tr>
                                            <tr>
                                                <th>TOTAL # OF ASSOC</th>
                                                <th class="text-end"><span class="FO_total_assoc">{{ dashboard_data.FO_Total_Assoc }}</span></th>
                                            </tr>
                                            <tr>
                                                <th>TOTAL # OF MEMBERS</th>
                                                <th class="text-end"><span class="FO_total_members">{{ dashboard_data.FO_Total_Members }}</span></th>
                                            </tr>
                                            <tr>
                                                <th>TOTAL # OF MALE</th>
                                                <th class="text-end"><span class="FO_total_male">{{ dashboard_data.FO_Total_Male }}</span></th>
                                            </tr>
                                            <tr>
                                                <th>TOTAL # OF FEMALE</th>
                                                <th class="text-end"><span class="FO_total_female">{{ dashboard_data.FO_Total_Female }}</span></th>
                                            </tr>
                                        </tbody>
                                    </table> 
                                </div>
                            </div>
                        </div>
                        <div class="col-6 col-lg-5 col-md-6">
                            <div class="card analyticCard">
                                <div class="card-body">
                                    <div style="width: 100%; margin: auto;">
                                        <canvas id="FO_region_piechart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6 col-lg-2 col-md-6">
                            <div class="FO_Comm_Dashboard"></div>
                        </div>
                        <div class="col-6 col-lg-3 col-md-6">
                            <div class="card analyticCard">
                                <div class="card-body">
                                    <div style="width: 100%; margin: auto;">
                                        <canvas id="FO_TO_barchart" height="300"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="container">
                    <h5 class="" style="margin-bottom: 20px; color: #ce8e04!important; font-weight: bold;">
                    <img src="/static/psalm_static/assets/img/icons/Sectors_MSME.png" width="30px" style="margin-right:5px;"/>
                    MICRO, SMALL, MEDIUM ENTERPRISES </h5>
                    <div class="row">
                        <div class="col-6 col-lg-2 col-md-6">
                            <div class="card analyticCard">
                                <div class="card-body">
                                    <table class="analyticUpdateTbl table table-striped" style="font-size: 10px;">
                                        <tbody>
                                            <tr>
                                                <th>TOTAL # OF MSME's</th>
                                                <th class="text-end"><span class="MSME_total">{{ dashboard_data.MSME_Total }}</span></th>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-6 col-lg-5 col-md-6">
                            <div class="card analyticCard">
                                <div class="card-body">
                                    <div style="width: 100%; margin: auto;">
                                        <canvas id="MSME_region_piechart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6 col-lg-2 col-md-6">
                            <div class="MSME_Comm_Dashboard text-center"></div>
                        </div>
                        <div class="col-6 col-lg-3 col-md-6">
                            <div class="card analyticCard">
                                <div class="card-body">
                                    <div style="width: 100%; margin: auto;">
                                        <canvas id="MSME_byType_barchart" height="300"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button style="width: 5%!important; " class="carousel-control-prev text-dark" type="button" data-bs-target="#carouselAnalyticUpdates" data-bs-slide="prev">
            <span style="color: #7CA03F!important;" class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button style="width: 5%!important; " class="carousel-control-next text-dark" type="button" data-bs-target="#carouselAnalyticUpdates" data-bs-slide="next">
            <span style="color: #7CA03F!important;" class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</div>

<script>
    $(document).ready(function(){

        
        $('.SHF_Comm_Dashboard').html(getCommodityDashboard("# of SHF's / Commodity",{{dashboard_data.SHF_byComm[0]}},{{dashboard_data.SHF_byComm[1]}},{{dashboard_data.SHF_byComm[2]}},{{dashboard_data.SHF_byComm[3]}},{{dashboard_data.SHF_byComm[4]}})); 
        $('.FO_Comm_Dashboard').html(getCommodityDashboard("# of FO's / Commodity",{{dashboard_data.FO_byComm[0]}},{{dashboard_data.FO_byComm[1]}},{{dashboard_data.FO_byComm[2]}},{{dashboard_data.FO_byComm[3]}},{{dashboard_data.FO_byComm[4]}})); 
        $('.MSME_Comm_Dashboard').html(getCommodityDashboard("# of MSME's / Commodity",{{dashboard_data.MSME_byComm[0]}},{{dashboard_data.MSME_byComm[1]}},{{dashboard_data.MSME_byComm[2]}},{{dashboard_data.MSME_byComm[3]}},{{dashboard_data.MSME_byComm[4]}})); 

        var background_colors = ["#629DDD","#A4BF7F","#A48BC1","#E2918F","#F4D470","#E8AA78","#A5D7D8","#7173A9","#77838E"];

        var ctx_SHF = document.getElementById('SHF_region_piechart').getContext('2d');
        const chartSHF = new Chart(ctx_SHF, {
            type: 'pie',
            data: {
                labels: ["R-8","R-9","R-10","R-11","R-12","R-13","BARMM"],
                datasets: [{
                    label: '',
                    data: JSON.parse("{{dashboard_data.SHF_byRegion}}"),
                    backgroundColor: background_colors,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 15,
                            boxHeight: 15,
                            font: {
                                size: 12
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: "SHF's / Region"
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.parsed+"%";
                            }
                        }
                    }
                }
            }
        });

        var ctx_SHF_HH_head = document.getElementById('SHF_HH_Head_barchart').getContext('2d');
        var chartSHF_HH_Head = new Chart(ctx_SHF_HH_head, {
            type: 'bar',
            data: {
                labels: ['Male','Female','Untagged'],
                datasets: [{
                    label: "Household - Head / Sex",
                    data: {{ dashboard_data.SHF_byHHHead }},
                    backgroundColor: ['#248CFB','#FF1B95','#7B7B7B'],
                    borderColor: '#fff',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        var ctx_FO = document.getElementById('FO_region_piechart').getContext('2d');
        const chartFO = new Chart(ctx_FO, {
            type: 'pie',
            data: {
                labels: ["R-8","R-9","R-10","R-11","R-12","R-13","BARMM"],
                datasets: [{
                    label: '',
                    data: JSON.parse("{{ dashboard_data.FO_byRegion }}"),
                    backgroundColor: background_colors,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 15,
                            boxHeight: 15,
                            font: {
                                size: 12
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: "FO's / Region"
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.parsed+"%";
                            }
                        }
                    }
                }
            }
        });

        var ctx_FO_TO = document.getElementById('FO_TO_barchart').getContext('2d');
        var chartFO_TO = new Chart(ctx_FO_TO, {
            type: 'bar',
            data: {
                labels: ["Association","Cooperative","Others"],
                datasets: [{
                    label: "# of Members / Type of FO's",
                    data: JSON.parse("{{ dashboard_data.FO_byOrgType }}"),
                    backgroundColor: background_colors,
                    borderColor: '#fff',
                    borderWidth: 1
                }]
            },
            options: {
                title: {
                    display: true,
                    text: "# of Members / Type of FO's"
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        var ctx_MSME = document.getElementById('MSME_region_piechart').getContext('2d');
        const chartMSME = new Chart(ctx_MSME, {
            type: 'pie',
            data: {
                labels: ["R-8","R-9","R-10","R-11","R-12","R-13","BARMM"],
                datasets: [{
                    label: '',
                    data: JSON.parse("{{ dashboard_data.MSME_byRegion }}"),
                    backgroundColor: background_colors,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 15,
                            boxHeight: 15,
                            font: {
                                size: 12
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: "MSME's / Region"
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.parsed+"%";
                            }
                        }
                    }
                }
            }
        });

        var ctx_MSME_PC = document.getElementById('MSME_byType_barchart').getContext('2d');
        var chartMSME_PC = new Chart(ctx_MSME_PC, {
            type: 'bar',
            data: {
                labels: ["Micro","Small","Medium","Large"],
                datasets: [{
                    label: "MSME's / Asset Size",
                    data: JSON.parse("{{ dashboard_data.MSME_byType }}"),
                    backgroundColor: background_colors,
                    borderColor: '#fff',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });


        function getCommodityDashboard(title,cacao,coconut,coffee,pfn,untagged){
            var html = "";
            html += '<div class="card analyticCard">';
            html +=   '<div class="card-body">';
            html += 	'<small style="display: block; margin-bottom: 10px; color:#666666;"><b>'+title+'</b></small>';
            html += 	'<div class="row">';
            html += 		'<div class="col-md-6 col-6">';
            html += 			'<div class="card card-stats" style="margin-bottom: 15px!important; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">';
            html += 				'<div class="card-body" style="padding: 10px; background: rgb(242 166 32 / 40%);">';
            html += 					'<div class="icon icon-shape text-center" style="margin-top: 10px; ">';
            html += 						'<img src="/static/psalm_static/assets/img/icons/Commodities_Cacao.png" style="width: 80%;" class="img-fluid" loading="lazy">';
            html += 					'</div>';
            html += 					'<h5 class="card-title text-uppercase text-muted mb-0 text-center" style="font-size:0.6em; margin: 0px; padding: 0px; margin-top: 10px; color: #EF8D22 !important;">Cacao</h5>';
            html += 					'<span class="d-block h1 font-weight-bold mb-0 text-center SHF_comm_cacao" style="font-size: 1em;">'+Money(cacao)+'</span>';
            html += 				'</div>';
            html += 			'</div>';
            html += 		'</div>';
            html += 		'<div class="col-md-6 col-6">';
            html += 			'<div class="card card-stats" style="margin-bottom: 15px!important; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">';
            html += 				'<div class="card-body" style="padding: 10px; background: rgb(124 160 102 / 40%);;">';
            html += 					'<div class="icon icon-shape text-center" style="margin-top: 10px;">';
            html += 						'<img src="/static/psalm_static/assets/img/icons/Commodities_Coconut.png" style="width: 80%;" class="img-fluid" loading="lazy">';
            html += 					'</div>';
            html += 					'<h5 class="card-title text-uppercase text-muted mb-0 text-center" style="font-size:0.6em; margin: 0px; padding: 0px; margin-top: 10px; color: #6D8C31 !important;">Coconut</h5>';
            html += 					'<span class="d-block h1 font-weight-bold mb-0 text-center SHF_comm_coconut" style="font-size: 1em;">'+Money(coconut)+'</span>';
            html += 				'</div>';
            html += 			'</div>';
            html += 		'</div>';
            html += 		'<div class="col-md-6 col-6">';
            html += 			'<div class="card card-stats" style="margin-bottom: 15px!important; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">';
            html += 				'<div class="card-body" style="padding: 10px; background: rgb(179 24 0 / 30%);">';
            html += 					'<div class="icon icon-shape text-center" style="margin-top: 10px;">';
            html += 						'<img src="/static/psalm_static/assets/img/icons/Commodities_Coffee.png" style="width: 80%;" class="img-fluid" loading="lazy">';
            html += 					'</div>';
            html += 					'<h5 class="card-title text-uppercase text-muted mb-0 text-center" style="font-size:0.6em; margin: 0px; padding: 0px; margin-top: 10px; color: #9E1204!important;">Coffee</h5>';
            html += 					'<span class="d-block h1 font-weight-bold mb-0 text-center SHF_comm_coffee" style="font-size: 1em;">'+Money(coffee)+'</span>';
            html += 				'</div>';
            html += 			'</div>';
            html += 		'</div>';
            html += 		'<div class="col-md-6 col-6">';
            html += 			'<div class="card card-stats" style="margin-bottom: 15px!important; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">';
            html += 				'<div class="card-body" style="padding: 10px; background:rgb(29 168 168 / 30%);">';
            html += 					'<div class="icon icon-shape text-center" style="margin-top: 10px;">';
            html += 						'<img src="/static/psalm_static/assets/img/icons/Commodities_PFN.png" style="width: 80%;" class="img-fluid" loading="lazy">';
            html += 					'</div>';
            html += 					'<h5 class="card-title text-uppercase text-muted mb-0 text-center" style="font-size:0.6em; margin: 0px; padding: 0px; margin-top: 10px; color: #189B97 !important;">PFN</h5>';
            html += 					'<span class="d-block h1 font-weight-bold mb-0 text-center SHF_comm_pfn" style="font-size: 1em;">'+Money(pfn)+'</span>';
            html += 				'</div>';
            html += 			'</div>';
            html += 		'</div>';
            html += 		'<p class="text-center" style="font-size:0.8em;">UNTAGGED : <b>'+Money(untagged)+'</b></p>';
            html += 	'</div>';
            html +=   '</div>';
            html += '</div>';

            return html;
        }
    });
</script>