{% extends 'layouts/dcf_base.html' %}
{% set active_page = "form2" %}
{% set forms = "forms" %}
{% block title %} Dashboard {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
<title>Form 2</title>
    {% include "includes/sweetalert.html" %}
    <div class="x-col l1 ">
        &nbsp;
    </div>

    <div class=" x-col l10 x-container x-padding x-card x-light-grey" style="margin-top: 10px; margin-bottom: 20px;">
        <center>
            <h2 class=" x-container text-white x-padding" style="background-color: #007399;">FORM 2 - CPA TRACKER</h2>
			<span class="badge" style=" background-color: #334257; color: #ffb366;" id="head_note"></span>
        </center>

        <!---text--->
        <div class="x-row x-container x-padding">
            <input class="FORM2_FIELD x-input" type="hidden"  id="id">

            <div class="x-col l4 x-container x-padding">
                <label class="">RCUs:</label>
                <select class="FORM2_FIELD x-border x-select x-border" id="form_2_rcus" name="form_2_rcus" required><br>
                    <option value="">Choose your option</option>
                    <option value="8">Region Vlll - Eastern Visayas</option>
                    <option value="9">Region lX - Zamboanga Peninsula</option>
                    <option value="10">Region X - Northern Mindanao</option>
                    <option value="11">Region Xl - Davao Region</option>
                    <option value="12">Region Xll - SOCCSKSARGEN</option>
                    <option value="13">Region Xlll - Caraga</option>
                    <option value="BARMM">BARMM</option>
                </select>
            </div>
            <div class="x-col l4 x-container x-padding">
                <label class="">PCU:</label>
                <select class="FORM2_FIELD x-border x-select x-border" id="form_2_pcu" name="form_2_pcu" required><br>
                    <option value="">Choose your option</option>
                    <option value="Northern Samar">Northern Samar</option>
                    <option value="Leyte">Leyte</option>
                    <option value="Southern Leyte">Southern Leyte</option>
                    <option value="Zamboanga del Norte">Zamboanga del Norte</option>
                    <option value="Zamboanga Sibugay">Zamboanga Sibugay</option>
                    <option value="Zamboanga del Sur">Zamboanga del Sur</option>
                    <option value="Misamis Oriental">Misamis Oriental</option>
                    <option value="Bukidnon">Bukidnon</option>
                    <option value="Lanao del Norte">Lanao del Norte</option>
                    <option value="Davao de Oro">Davao de Oro</option>
                    <option value="Davao Oriental">Davao Oriental</option>
                    <option value="Davao del Norte">Davao del Norte</option>
                    <option value="Davao del Sur">Davao del Sur</option>
                    <option value="Davao Occidental">Davao Occidental</option>
                    <option value="North Cotabato">North Cotabato</option>
                    <option value="Sultan Kudarat">Sultan Kudarat</option>
                    <option value="Sarangani">Sarangani</option>
                    <option value="Agusan del Norte">Agusan del Norte</option>
                    <option value="Agusan del Su">Agusan del Sur</option>
                    <option value="Surigao del Sur">Surigao del Sur</option>
                    <option value="Maguindanao">Maguindanao</option>
                </select>
            </div>

            <div class="x-col l4 x-container x-padding">
                <label class="">Commodity:</label>
                <select class="FORM2_FIELD withother x-border x-select x-border" id="form_2_commodity" name="form_2_commodity" required>
                    <option value="">Choose your option</option>
                    <option value="Coffee">Coffee</option>
                    <option value="Cacao">Cacao</option>
                    <option value="Coconut">Coconut</option>
                    <option value="PFN">PFN</option>
                </select>
                <input type="text" class="FORM2_FIELD hidden-textbox x-input x-border" name="form_2_commodity_others"
                    id="form_2_commodity_others" show-base="form_2_commodity" show-trigger="PFN"  placeholder="Please specify">
            </div>

            <div class="x-row">
                <div class="x-col l4 x-container x-padding">
                    <label class=""><span style="color: #007399;" class="tool" data-tip="DIP name format: Region_DIP Name (ex. R8_SC Global)" tabindex="1"><i class="fa-solid fa-circle-info"></i></span>   DIP Alignment:
                    </label>
                        <select class="FORM2_FIELD withother x-border x-select x-border" id="form_2_dip_alignment" name="form_2_dip_alignment" required>
                            <option value="none">Choose your option</option>
                            <option value="Yes">Yes</option>
                            <option value="No DIP Alignment">No</option>
                        </select>
                        <input type="text" class="FORM2_FIELD hidden-textboxdip x-input x-border" name="form_2_dip_alignment_yes"
                            id="form_2_dip_alignment_yes" show-base="form_2_dip_alignment" show-trigger="Yes" placeholder="Enter DIP name">
                </div>
            </div>
        </div>
        <div class="x-row x-container x-padding">
            <div class="x-col l6 x-container x-padding">
                <label class="">Name of Owner or Manager of the anchor Firm/MSMEs:</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_name_owner_manager" name="form_2_name_owner_manager"
                    type="text" autocomplete="on" placeholder="Full Name: (ex. Juan Dela Cruz)">
            </div>
            <div class="x-col l5 x-container x-padding">
                <label class="">Sex of the Owner or Manager of the anchor Firm/MSMEs:</label>
                <select class="FORM2_FIELD x-border x-select x-border" id="form_2_sex_owner_manager"
                    name="form_2_sex_owner_manager"><br>
                    <option value="">Choose Sex</option>
                    <option>Male</option>
                    <option>Female</option>
                </select>
            </div>
        </div>
        <div class="x-row x-container x-padding">
            <div class="x-col l5 x-container x-padding">
                <label class="">Sector of Owner or manager of the anchor firm/MSMEs:</label>
                    <select class="FORM2_FIELD x-border x-select x-border" id="form_2_sector_owner_manager"
                    name="form_2_sector_owner_manager"><br>
                    <option value="">Choose Sector</option>
                    <option>PWD</option>
                    <option>Youth</option>
                    <option>IP</option>
                    <option>SC</option>
                    <option>Abled</option>
                </select>
            </div>
            <div class="x-col l6 x-container x-padding">
                <label class=""><span style="color: #007399;" class="tool" data-tip="Indicate full  Business name of Anchor Firm/MSMEs based on official registration." tabindex="1"><i class="fa-solid fa-circle-info"></i></span> Business Name:</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_businessname" name="form_2_businessname"
                    type="text" autocomplete="on" placeholder="">
            </div>
           
        </div>
        <div class="x-row x-container x-padding">
            <div class="x-col l6 x-container x-padding">
                <label class=""><span style="color: #007399;" class="tool" data-tip="Provide complete Business Address. (Format: Building, Street, Barangay, City/Municipality, Province)" tabindex="1"><i class="fa-solid fa-circle-info"></i></span>   Business Address of Owner or manager of the anchor firm/MSMEs:</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_business_owner_manager" name="form_2_business_owner_manager"
                    type="text" placeholder="">
            </div>
            <div class="x-col l6  x-container x-padding">
                <label class=""><span style="color: #007399;" class="tool" data-tip="Indicate full name of FO based on official regisration." tabindex="1"><i class="fa-solid fa-circle-info"></i></span>Name of Partner FOs Engaged:</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_partner_fo_engaged" name="form_2_partner_fo_engaged"
                    type="text" placeholder="">
            </div>
            <div class="x-col l6 x-container x-padding">
                <label class="">Chairperson or Manager of Partner FO:</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_chairperson_manager" name="form_2_chairperson_manager"
                    type="text" placeholder="">
            </div>
            <div class="x-col l6 x-container x-padding">
                <label class="">Sex of the Chairperson or Manager of Partner FO:</label>
                <select class="FORM2_FIELD x-border x-select x-border" id="form_2_sex_chairperson_manager"
                    name="form_2_sex_chairperson_manager"><br>
                    <option value="">Choose Sex</option>
                    <option>Male</option>
                    <option>Female</option>
                </select>
            </div>
        </div>
        <div class="x-row x-container x-padding">
            <div class="x-col l6 x-container x-padding">
                <label class="">Sector of Chairperson or Manager of Partner FO:</label>
                <select class="FORM2_FIELD x-border x-select x-border" id="form_2_sector_chairperson_manager"
                    name="form_2_sector_chairperson_manager"><br>
                    <option value="">Choose Sector</option>
                    <option>PWD</option>
                    <option>Youth</option>
                    <option>IP</option>
                    <option>SC</option>
                    <option>Abled</option>
                </select>
            </div>
            <div class="x-col l6 x-container x-padding">
                <label class=""><span style="color: #007399;" class="tool" data-tip="Provide complete Business Address. (Format: Building, Street, Barangay, City/Municipality, Province)" tabindex="1"><i class="fa-solid fa-circle-info"></i></span> Office Address of FO:</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_office_address_province" type="text"
                    name="form_2_office_address_province" placeholder="">
            </div>
        </div>

        <div class="x-row x-container x-padding">
            <div class="x-col l4 x-container x-padding">
                <label class="">Total number of FO members:</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_total_number_fo" name="form_2_total_number_fo" type="number"
                    placeholder="">
            </div>
            <div class="x-container x-padding">
                <style>
                    table,
                    th,
                    td {
                        border: 1px solid black;
                        border-collapse: collapse;
                    }
                </style>
                <table class="x-table x-container x-table-border">
                    <tr>
                        <th colspan="2">
                            <center>Total number of FO members by Sex</center>
                        </th>
                        <th colspan="4">
                            <center>Total number of FO members by Sector</center>
                        </th>
                    </tr>

                    <tr>
                        <!---gender---->
                        <td>
                            <center>Male</center>
                        </td>
                        <td>
                            <center>Female</center>
                        </td>

                        <!---SectorG---->
                        <td>
                            <center>PWD</center>
                        </td>
                        <td>
                            <center>Youth</center>
                        </td>
                        <td>
                            <center>IP</center>
                        </td>
                        <td>
                            <center>SC</center>
                        </td>
                    </tr>

                    <tr>
                        <!---gender--->
                        <td><input class="FORM2_FIELD x-light-grey x-input" id="form_2_male" type="number" name="form_2_male"></td>
                        <td><input class="FORM2_FIELD x-light-grey x-input" id="form_2_female" type="number" name="form_2_female">
                        </td>

                        <!--sectorG--->
                        <td><input class="FORM2_FIELD x-light-grey x-input" id="form_2_pwde" type="number" name="form_2_pwde"></td>
                        <td><input class="FORM2_FIELD x-light-grey x-input" id="form_2_youth" type="number" name="form_2_youth">
                        </td>
                        <td><input class="FORM2_FIELD x-light-grey x-input" id="form_2_ip" type="number" name="form_2_ip"></td>
                        <td><input class="FORM2_FIELD x-light-grey x-input" id="form_2_sc" type="number" name="form_2_sc"></td>
                    </tr>
                </table>
            </div>
        </div>
        <center>
            <h2 class=" x-container text-white x-padding" style="background-color: #007399;">CPA Information</h2>
        </center>
        <div class="x-row x-container x-padding">
            <!-- <div class="x-col l6 x-container x-padding">
                <label class="">Address of FO Member:</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_address_of_fo_members" name="form_2_address_of_fo_members"
                    type="text" placeholder="">
            </div> -->
            <div class="x-col l6 x-container x-padding">
                <label class=""><span style="color: #007399;" class="tool"  data-tip="Input number of hectares with four decimal places. (example: 143.1433)" tabindex="1"><i class="fa-solid fa-circle-info"></i></span> Hectares Covered:</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_hectares_covered" name="form_2_hectares_covered"
                    placeholder="">
            </div>
            <div class="x-col l3 x-container x-padding">
                <label for="form_2_cpa_date_signing">Date of CPA Signing:</label>
                <input class="FORM2_FIELD x-input x-border" type="date" id="form_2_cpa_date_signing" style="width: 100%;"
                    name="form_2_cpa_date_signing" onchange="computeDaysRemaining()">
            </div>
            <div class="x-col l3 x-container x-padding">
                <label for="form_2_cpa_date_expiration">CPA Expiration Date:</label>
                <input class="FORM2_FIELD x-input x-border" type="date" id="form_2_cpa_date_expiration" style="width: 100%"
                    name="form_2_cpa_date_expiration" onchange="computeDaysRemaining()">
            </div>
            <div class="x-col l3 x-container x-padding">
                <label for="form_2_days_remaining">Days Remaining:</label>
                <input class="FORM2_FIELD x-input x-border" type="number" id="form_2_days_remaining" style="width: 100%;"
                    name="form_2_days_remaining" readonly>
            </div>
            <div class="x-col l3 x-container x-padding">
                <label class="">Date Renewed:</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_date_renewed" name="form_2_date_renewed" type="date"
                    placeholder="">
            </div>
            <div class="x-col l6 x-container x-padding">
                <label class="">Notable CPA incentives(Optional entry):</label>
                <input class="FORM2_FIELD x-input x-border" id="form_2_notable_cpa_incentives" name="form_2_notable_cpa_incentives"
                    style="width: 100%;" type="text" placeholder="">
            </div>
           
        </div>
        <div class="x-row x-container x-padding">
            <div class="x-col l5 x-container x-padding">
                <label class="">Remarks/Status :</label>
                <select class="FORM2_FIELD withother x-border x-select x-border" id="form_2_remarks_status" name="form_2_remarks_status" required>
                    <option value="none">Choose Option</option>
                    <option value="Non-renewal">Non-renewal</option>
                    <option value="Cancelled">Cancelled</option>
                    <option value="On-going">On-going</option>
                </select>
                <input type="text" class="FORM2_FIELD hidden-textbox2 x-input x-border" name="form_2_remarks_status_why"
                    id="form_2_remarks_status_why" show-base="form_2_remarks_status" show-trigger="Cancelled||Non-renewal"  placeholder="Reason why">
            </div>
            <div class="x-col l7 x-container x-padding" style="width: 55%;">
                <style>
                    table,
                    th,
                    td {
                        border: 1px solid black;
                        border-collapse: collapse;
                    }
                </style>
                <table id="form2_table" class="x-table x-container x-table-border">
                    <tr>
                        <th colspan="2">
                            <center><button type="button" style="float: left;" class="btn btn-primary"
                                    onclick="add_row()"><i class="fa-solid fa-circle-plus"></i></button>CPA
                                Implementation</center>
                        </th>
                    </tr>

                    <tr>
                        <td>
                            <center>Activity/Agreements (Outputs vis-à-vis signed CPA)</center>
                        </td>
                        <td>
                            <center>Date conducted/implemented</center>
                        </td>
                    </tr>

                    <tr>
                        <td><input class="FORM2_FIELD x-light-grey x-input" id="form_2_activity_agreements_kapown_0" type="text"
                                name="form_2_activity_agreements[]"></td>
                        <td><input class="FORM2_FIELD x-light-grey x-input" id="form_2_date_conducted_kapown_0" type="date"
                                name="form_2_date_conducted[]"></td>
                    </tr>
                </table>
            </div>
            <div class="x-col l5">

                <div class="x-col l3 x-container x-padding" style="width: 10px">
                    <input class=" x-padding" type="file" id="form_2_image_uploads" name="image_uploads"
                        accept=".jpg, .jpeg, .png, .mp4, .mov, .xlsx, .pdf, .docx, .pptx" multiple />
                </div>


            </div>
            <!-- <div class="x-col l4 x-container x-padding">	
            <button data-toggle="modal" data-target="#form2_modalpart" href="" style="box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;" type="button" id="btnpart" class="x-teal btn"><i class="fa-solid fa-user-plus"></i>&nbsp;&nbsp;Add Participants</button>
        </div> -->
        </div>

        <script>
            var k_counter = 1
            function add_row() {
                // $ID('main_').innerHTML += og_row
                // Create an empty <tr> element and add it to the 1st position of the form3_table_org_comp:
                var row = form2_table.insertRow(1);
                // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
                row.insertCell(0).innerHTML = `<td><input class="FORM2_FIELD x-light-grey x-input" id="form_2_activity_agreements_kapown_`+k_counter+`" type="text" name="form_2_activity_agreements[]"></td>`
                row.insertCell(1).innerHTML = `<td><input class="FORM2_FIELD x-light-grey x-input" id="form_2_date_conducted_kapown_`+k_counter+`"" type="date" name="form_2_date_conducted[]"></td>`
                k_counter += 1
                // Add some text to the new cells:
            }
        </script>

<p class="x-right" id="submit_btn_holder">
            <button class="btn btn-primary" type="button" onclick="submit_form('FORM2_FIELD','dcf_implementing_unit','/form2_dashboard')">Submit</button>
</p>
        </div>



    {% include 'formdata_handler.html' %}




<script type="text/javascript">
    	$onload(function () {
		var record_id = URL_ARGS["id"]
		var table = URL_ARGS["table"]
		load_data(record_id, table, "FORM2_FIELD")
		
		// submit_form('CLASSNAME_FOR_FIELDS','TABLE_NAME','URL_DASH',)
	})


    function getDropDown(sel) {
        hideAll();
        document.getElementById(sel.options[sel.selectedIndex].value).style.display
            = 'block';
    }

    function hideAll() {
        document.getElementById("yes").style.display = 'none';

    }

    function computeDaysRemaining() {
        const signingDate = new Date(document.getElementById("form_2_cpa_date_signing").value);
        const expirationDate = new Date(document.getElementById("form_2_cpa_date_expiration").value);
        const timeDiff = expirationDate.getTime() - signingDate.getTime();
        const daysRemaining = Math.ceil(timeDiff / (1000 * 3600 * 24));
        document.getElementById("form_2_days_remaining").value = daysRemaining;
    }
</script>
{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}

{% endblock javascripts %}