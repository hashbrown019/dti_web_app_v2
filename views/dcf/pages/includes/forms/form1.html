{% extends 'layouts/dcf_base.html' %}
{% set active_page = "form1" %}
{% set forms = "forms" %}
{% block title %} Dashboard {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
<title>Form 1</title>
<form action="/insert_form1" method="POST" enctype="multipart/form-data" id="form1">
    {% include "includes/sweetalert.html" %}
    <div class="x-col l1 ">
		&nbsp;
	</div>

	<div class=" x-col l10 x-container x-card x-light-grey" style="margin-top: 10px; margin-bottom: 20px;"  >
		<center><h2 class=" text-white x-container x-padding" style="background-color: #007399;">FORM 1 - PREPARATION, REVIEW AND APPROVAL STATUS</h2></center>

		<div class="x-container x-padding">
			<style> 
				table, th, td{border: 1px solid black;border-collapse: collapse;}
			</style>
			
			<!---text---> 
			<div class="x-row x-section x-padding ">
				<div class="x-row">
					<div class="x-col l4 x-container x-padding">
							<span class="">RCUs</span>
					<select class="form_data_b x-border x-select x-border" id="form_1_rcus" name="form_1_rcus" required><br>
						<option value="">Choose your option</option>
							<option value="8">Region Vlll - Eastern Visayas</option>
							<option value="9">Region lX -  Zamboanga Peninsula</option>
							<option value="10">Region X - Northern Mindanao</option>
							<option value="11">Region Xl - Davao Region</option>
							<option value="12">Region Xll - SOCCSKSARGEN</option>
							<option value="13">Region Xlll - Caraga</option>
							<option value="BARMM">BARMM</option>
					</select>
						</div>
						<!-- <div class="x-col l4 x-container x-padding">
							<label>Number Of DIPs</label>
							<input class=" x-input x-border" id="form_1_number_of_dips" type="Number" name="form_1_number_of_dips" placeholder="">
						</div> -->
						<div class="x-col l4 x-container x-padding">
							<label>Name of DIP</label>
							<input class=" x-input x-border" id="form_1_name_dip" type="text" name="form_1_name_dip" placeholder="">
						</div>
						<div class="x-col l4 x-container x-padding">
							<label>Anchor Firm</label>
							<input class=" x-input x-border" id="form_1_anchor_firm" type="text" name="form_1_anchor_firm" placeholder="">
						</div>
				
				</div>

				<!---dropdown--->
				<div class="x-row x-padding x-container">
					<div class="x-col l4 x-container x-padding">
						<span class="">Size Of Anchor</span>
						<select class=" x-border x-select x-border" id="form_1_size_of_anchor" name="form_1_size_of_anchor"><br>
							<option value="" >Choose your option</option>
							<option >Large</option>
							<option >Medium</option>
							<option >Small</option>
							<option >Micro</option>
						</select>
					</div>
					<div class="x-col l4 x-container x-padding">
						<span class="">Commodity</span>
						<select class="x-border x-select x-border" id="form_1_commodity" name="form_1_commodity" required>
							<option value="">Choose your option</option>
							<option>Coffee</option>
							<option>Cacao</option>
							<option>Coconut</option>
							<option>PFN</option>
						</select>
						<input type="text" class="hidden-textbox x-input x-border" name="form_1_commodity_others" id="form_1_commodity_others" placeholder="Please specify">
					</div>
					
					<div class="x-col l4 x-container x-padding">
						<span class="">Scope/Provinces</span>
						<select class=" x-border x-select x-border" id="form_1_scope_provinces" name="form_1_scope_provinces" required><br>
							<option selected value="">Choose Province</option>
						<option>Northern Samar</option>
						<option>Leyte</option>
						<option>Southern Leyte</option>
						<option>Zamboanga del Norte</option>
						<option>Zamboanga Sibugay</option>
						<option>Zamboanga del Sur</option>
						<option>Misamis Oriental</option>
						<option>Bukidnon</option>
						<option>Lanao del Norte</option>
						<option>Davao de Oro</option>
						<option>Davao Oriental</option>
						<option>Davao del Norte</option>
						<option>Davao del Sur</option>
						<option>Davao Occidental</option>
						<option>North Cotabato</option>
						<option>Sultan Kudarat</option>
						<option>Sarangani</option>
						<option>Agusan del Norte</option>
						<option>Agusan del Sur</option>
						<option>Surigao del Sur</option>
						<option>Maguindanao</option>
						</select>
					</div>
				</div>



				<!---date--->
				<div class="x-row x-padding x-container">
					<div class="x-col l5 x-container x-padding" style="width: 30%;">	
						<label>For development (indicate date):</label>
						<input class=" x-input x-border" id="form_1_for_development" name="form_1_for_development" type="date" placeholder="">
					</div>
					<!-- <div class="x-col l3 x-container x-padding" style="width: 30%;">	
						<label>Date: CN Approved</label>
						<input class=" x-input x-border" id="form_1_cn_approved" type="date" name="form_1_cn_approved" placeholder="">
					</div> -->
					<div class="x-col l3 x-container x-padding" style="width: 60%;">	
						<label>Date: Full BPs and DIPs Finalized/Approved by RCUs and endorsed to NPCO for Review</label>
						<input class=" x-input x-border" id="form_1_finalized_approved" name="form_1_finalized_approved" type="date" placeholder="">
					</div>
					<div class="x-col l3 x-container x-padding" style="width: 40%;">	
						<label>Date of the Parallel Review with NPCO/RGMS-IFAD-RTWG</label>
						<input class=" x-input x-border" id="form_1_date_of_parallel_review" name="form_1_date_of_parallel_review" type="date" placeholder="">
					</div>
					<div class="x-col l3 x-container x-padding" style="width: 60%;">	
						<label>Date of submission of the  revised DIPs based on the comments from the parallel review</label>
						<input class=" x-input x-border" id="form_1_date_of_submission" name="form_1_date_of_submission" type="date" placeholder="">
					</div>
					<div class="x-col l3 x-container x-padding" style="width: 40%;">	
						<label>Date of RTWG Approval</label>
						<input class=" x-input x-border" id="form_1_date_of_rtwg" name="form_1_date_of_rtwg" type="date" placeholder="">
					</div>
					<div class="x-col l3 x-container x-padding" style="width: 100%;">	
						<label>Date: NPCO cursory review of RCU's compliance to parallel review comments; and DIP  endorsement to NOTUS Uploading</label>
						<input class=" x-input x-border" id="form_1_date_of_npco_cursory" name="form_1_date_of_npco_cursory" type="date" placeholder="">
					</div>
					<div class="x-col l3 x-container x-padding" style="width: 50%;">	
						<label>Date: Uploading to IFAD NOTUS c/o NPCO</label>
						<input class=" x-input x-border" id="form_1_date_of_uploading_to_ifad" name="form_1_date_of_uploading_to_ifad" type="date" placeholder="">
					</div>
					<div class="x-col l3 x-container x-padding" style="width: 50%;">	
						<label>Date: NPCO Date of Approval </label>
						<input class=" x-input x-border" id="form_1_date_of_ifad_no_inssuance" name="form_1_date_of_ifad_no_inssuance" type="date" placeholder="">
					</div>
				</div>

			</div>
		</div>
		<div class=" x-container" style="margin-top: 10px; margin-bottom: 20px;"  >
			<center><h2 class=" text-white x-container" style="background-color: #007399;">DIP Details</h2></center>

			<div class="x-row x-padding x-container">
					<div class="x-col l4 x-container x-padding">	
							<label>Total # of MSME's</label>
							<input class=" x-input x-border" id="form_1_totalmsme" type="text" name="form_1_totalmsme" placeholder="">

				</div>

				<div class="x-col l4 x-container x-padding">	
					<label>Total # of Small Holder Farmers</label>
					<input class=" x-input x-border" id="form_1_total_farmerbene" type="text" name="form_1_total_farmerbene" placeholder="">

		</div>
		<div class="x-col l4 x-container x-padding">	
			<label>Total # of FOs </label>
			<input class=" x-input x-border" id="form_1_totalfo"  type="text" name="form_1_totalfo" placeholder="">

			</div>
			<div class="x-row">
				<div class="x-container x-padding ">
					<!-- <div class="x-col l8 x-container x-padding">
						<label>Input Name of FO</label>
						<input class=" x-input x-border" id="form_1_namefo" type="text" name="form_1_namefo" placeholder="">
					</div> -->
					<div class="x-col l4 x-container x-padding" >
						<label>Total Hectarage Covered</label>
						<input class=" x-input x-border" id="form_1_totalhectarage_cov" name="form_1_totalhectarage_cov"  placeholder="">
					</div>
					<div class="x-col l4 x-container x-padding">
						<label>Hectares for Rehab</label>
						<input class=" x-input x-border" id="form_1_hect_rehab" name="form_1_hect_rehab" type="Number" placeholder="">
					</div>
					<div class="x-col l4 x-container x-padding">
						<label>Total Cost of Rehab </label>
						<input class=" x-input x-border" id="form_1_total_cost_rehab" name="form_1_total_cost_rehab" type="Number" placeholder="">
					</div>
					<div class="x-col l4 x-container x-padding">
						<label>Hectares for Expansion</label>
						<input class=" x-input x-border" id="form_1_hect_exp" name="form_1_hect_exp" type="Number" placeholder="">
					</div>
					<div class="x-col l4 x-container x-padding">
						<label>Total Cost of Expansion</label>
						<input class=" x-input x-border" id="form_1_cost_exp" name="form_1_cost_exp" type="Number" placeholder="">
					</div>
				</div>
			</div>


			<div class="x-row x-container x-padding">
				<style>table, th, td{border: 1px solid black; border-collapse: collapse;}</style>
				<table class="x-table x-container x-table-border">
					<tr>
						<th colspan="3">
							<center>Total Cost of Productive Investments</center>
						</th>

					</tr>

					<tr>
						<td><center>Equipment</center></td>
						<td><center>Facilities/Warehouse</center></td>
						<td><center>Total</center></td>
					</tr>

					<tr>
						<td><input class=" x-input x-border form_1_euqipments" id="form_1_euqipment" name="form_1_euqipment" type="number" placeholder=""></td>
						<td><input class=" x-input x-border form_1_Facilities_warehouses" id="form_1_Facilities_warehouse" name="form_1_Facilities_warehouse" type="number" placeholder=""></td>
						<td><input class=" x-input x-border form_1_total_prod_invs" id="form_1_totalcost_prodinvest" name="form_1_totalcost_prodinvest" type="number" placeholder="" readonly></td>
					</tr>
				</table>
			</div>

			<div class="x-row x-container x-padding">
				<style>table, th, td{border: 1px solid black; border-collapse: collapse;}</style>
				<table class="x-table x-container x-table-border">
					<tr>
						<th colspan="4">
							<center>Total Matching Grant</center>
						</th>
					</tr>
			
					<tr>
						<td><center>Total cost of Rehab</center></td>
						<td><center>Total Cost of Expansion</center></td>
						<td><center>Total Cost of Productive Investments</center></td>
						<td><center>Total</center></td>
					</tr>
			
					<tr>
						<td><input class="x-input x-border form-1-aa" id="form_1_total_rehab" name="form_1_total_rehab"  type="number" placeholder=""></td>
						<td><input class="x-input x-border form-1-ab" id="form_1_total_exp" name="form_1_total_exp"  type="number" placeholder=""></td>
						<td><input class="x-input x-border form_1_totalcost_prodinvest2" id="form_1_totalcost_prodinvest2" name="form_1_totalcost_prodinvest2" type="number" placeholder="" readonly></td>
						<td><input class="x-input x-border form-1-total-matching-grant-update" id="form_1_total_matching_grant" name="form_1_total_matching_grant" placeholder="" readonly></td>
					</tr>
				</table>
			</div>

			<div class="x-row x-container x-padding">
				<style>table, th, td{border: 1px solid black; border-collapse: collapse;}</style>
				<table class="x-table x-container x-table-border">
					<tr>
						<th colspan="5">
							<center>Capacity Building</center>
						</th>

					</tr>

					<tr>
						<td><center>Organizational</center></td>
						<td><center>Technical Trainings</center></td>
						<td><center>Post-Production</center></td>
						<td><center>Others</center></td>
						<td><center>Total</center></td>
					</tr>

					<tr>
						<td><input class=" x-input x-border form1_org" id="form_1_organizational" name="form_1_organizational" type="number" placeholder=""></td>
						<td><input class=" x-input x-border form1_tech" id="form_1_technical_trainings" name="form_1_technical_trainings" type="number" placeholder=""></td>
						<td><input class=" x-input x-border form1_postprod" id="form_1_post_production" name="form_1_post_production" type="number" placeholder=""></td>
						<td><input class=" x-input x-border form1_otherz" id="form_1_others" type="number" name="form_1_others" placeholder=""></td>
						<td><input class=" x-input x-border form1_total_caps" id="form_1_total_capbuild" type="text" name="form_1_total_capbuild" placeholder="" readonly></td>
					</tr>
				</table>
			</div>
			<div class="x-row">
					<div class="x-col l6 x-container x-padding">
						<label>Supply Chain Manager</label>
						<input class=" x-input x-border form1_total_sup" id="form_1_supply_chain_manager" name="form_1_supply_chain_manager" type="number" placeholder="">
					</div>
	
			</div>

			
			<div class="x-row x-container x-padding">
				<style>table, th, td{border: 1px solid black; border-collapse: collapse;}</style>
				<table class="x-table x-container x-table-border">
					<tr>
						<th colspan="4">
							<center>Total Project Cost</center>
						</th>
					</tr>
			
					<tr>
						<td><center>Total Matching Grant</center></td>
						<td><center>Total Capacity Building</center></td>
						<td><center>Supply Chain Manager</center></td>
						<td><center>Total</center></td>
					</tr>
			
					<tr>
						<td><input class="x-input x-border form1_mg" id="form_1_y" name="form_1_y" type="number" placeholder="" readonly></td>
						<td><input class="x-input x-border form1_cap" id="form_1_ac" name="form_1_ac" type="number" placeholder="" readonly></td>
						<td><input class="x-input x-border form1_sup" id="form_1_ad" name="form_1_ad" type="number" placeholder="" readonly></td>
						<td><input class="x-input x-border form-1-totalproject_cost" id="form_1_totalproject_cost" name="form_1_totalproject_cost" placeholder="" readonly></td>
					</tr>
				</table>
			</div>

			
			<div class="x-row">
				<div class="x-container x-padding ">
					<div class="x-col l6 x-container x-padding">
						<label>FMI</label>
						<input class=" x-input x-border" id="form_1_fmi" name="form_1_fmi" type="text" placeholder="">
					</div>
					<div class="x-col l6 x-container x-padding">
						<label>FMI Kms</label>
						<input class=" x-input x-border" id="form_1_fmi_kms" name="form_1_fmi_kms" type="text" placeholder="">
					</div>
				</div>
			</div>
			<div class="x-row x-container x-padding">
			
					<div class="x-col l8 x-container x-padding" id="form_1_choose_files">
						<label for="image_uploads">Choose file</label>
						<input
						type="file"
						id="mov"
						name="mov"
						multiple />
					</div>
					<div class="x-col l4 x-container x-padding">	
						<button data-toggle="modal" data-target="#form1_modalpart" href="" style="box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;" type="button" id="btnpart" class="x-teal btn"><i class="fa-solid fa-user-plus"></i>&nbsp;&nbsp;Add Participants</button>
					</div>
                    <p class="x-right">
                        <input class="x-blue btn " id="form1sub"  type="submit">
                        </p>
				
			</div>
		</div>
		{% include "includes/forms/form1_participants.html" %}
</form>

<script>
    document.querySelector('#myModal .close').addEventListener('click', function() {
    $('#myModal').modal('hide');
  });


  var x_inputs_ = $CLASS('x-input')
  for (let index = 0; index < x_inputs_.length; index++) {
	if(x_inputs_[index].id!='form_1_totalproject_cost'){
		x_inputs_[index].addEventListener('keyup',function(ee){
			var num1 = parseFloat($ID("form_1_y").value) ;var num2 = parseFloat($ID("form_1_ac").value) ;var num3 = parseFloat($ID("form_1_ad").value) 
			if(isNaN(num1)){ num1 = 0} 
			if(isNaN(num2)){ num2 = 0} 
			if(isNaN(num3)){ num3 = 0}
			println(num3)
			$ID('form_1_totalproject_cost').value = num1 + num2 + num3

		})
	}
  }

  function generate_modal(){
    var modal_ls_search = $dialog({
      title : "adad"
    })
    
    modal_ls_search.show()
  }

	function search_profile(){
		var search_key = $ID('name_partc').value
		alert('Click to continue searching ['+search_key+']')
		$send({
			action : "/formb/search_farmer_profile",
			method : POST,
			err_dialog:true,
			data : $DATA({'search_item':search_key}),
			func : function(rest){
				var res_ = JSON.parse(rest)
				println(res_)
        		generate_modal(res_)
			},
			err : function(res){println(res)},
			progress : function(e){ 
				// var response_length = parseFloat(headerMap(e)['total'])
				var response_length = parseFloat(e.total)
				var response_loaded = parseFloat(e.loaded)
				var percent_  = (response_loaded / response_length) * 100;
				var percent_rounded = Math.round(percent_ * 100) / 100
			}
		})

		// TABLE.ajax.url('/feature_0/filter_list_farmers')
		// TABLE.ajax.reload()
	}

</script>
{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}

{% endblock javascripts %}

