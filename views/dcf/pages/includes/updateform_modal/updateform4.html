
{% for row in form4_datatable %}
<div class="modal fade" id="form4edit{{row['id']}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" id="modaldialogedit" role="document" style="max-width: 80%;">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #007399;">
        <h5 class="modal-title text-white" id="exampleModalLabel">UPDATE DATA</h5>       
        <button type="button" id="xbutton" class="close" data-dismiss="modal" aria-label="Close">
          <span class="text-white" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="modalbodyedit">

              <form style="margin-left: 2%; margin-right: 2%;" id="form4" action="/updateform4" method="POST">
                {% include "includes/sweetalert.html" %}

                <div class="x-col l1 " >
                    &nbsp;
                </div>
                <div class=" x-col l13 x-container x-card x-light-grey" style=" margin-top: 10px; margin-bottom: 20px;" >
                    <center><h2 class=" x-container x-padding text-white" style="background-color: #007399;">Capacity Building for Beneficiaries</h2></center>
            
                    <div class="x-container x-padding">
                        <style> 
                            table, th, td{border: 1px solid black;border-collapse: collapse;}
                        </style>
            
            
                        <!---1--->
                        <div class="x-row x-container x-padding">
                            <div class="x-col l3 x-container x-padding">
                                <input type="hidden"  name="id" value="{{ row['id'] }}">
                                <span class="">Implementing Unit</span>
                                <select class="form_data_b x-border x-select x-border"  value="{{ row['cbb_implementing_unit'] }}" id="cbb_implementing_unit" name="cbb_implementing_unit"><br>
                                    <option >{{ row['cbb_implementing_unit'] }}</option>
                                    <option value="">Choose your option</option>
						<optgroup label="RCU">
							<option value="8">Region Vlll - Eastern Visayas</option>
							<option value="9">Region lX -  Zamboanga Peninsula</option>
							<option value="10">Region X - Northern Mindanao</option>
							<option value="11">Region Xl - Davao Region</option>
							<option value="12">Region Xll - SOCCSKSARGEN</option>
							<option value="13">Region Xlll - Caraga</option>
							<option value="BARMM">BARMM</option>
						</optgroup>
						<optgroup label="PCU">
			
						<option>Northern Samar</option>
						<option>Leyte</option>
						<option>Southern Leyte</option>
						<option>Zamboanga del Norte</option>
						<option>Zamboanga Sibugay</option>
						<option>Zamboanga del Sur</option>
						<option>Misamis Oriental</option>
						<option>Bukidnon</option>
						<option>Lanao del Norte</option>
						<option>Davao de Oro</option>
						<option>Davao Oriental</option>
						<option>Davao del Norte</option>
						<option>Davao del Sur</option>
						<option>Davao Occidental</option>
						<option>North Cotabato</option>
						<option>Sultan Kudarat</option>
						<option>Sarangani</option>
						<option>Agusan del Norte</option>
						<option>Agusan del Sur</option>
						<option>Surigao del Sur</option>
						<option>Maguindanao</option>
							</optgroup>
						<option style="font-weight: bold;">NGA Partners</option>
                                </select>
                            </div>
                            <div class="x-col l3 x-container x-padding">
                                <label>Training Number</label>
                                <input class="form_data_b x-input x-border" name="cbb_training_number"  value="{{ row['cbb_training_number'] }}" id="cbb_training_number" type="Number" placeholder="">
                            </div>
                            <div class="x-col l3 x-container x-padding">
                                <label>Activity Title</label>
                                <input class="form_data_b x-input x-border" value="{{ row['cbb_activity_title'] }}" name="cbb_activity_title" id="cbb_activity_title" type="text" placeholder="">
                            </div>
                            <div class="x-col l3 x-container x-padding">
                                <span class="">Types of Training</span>
                                <select class="form_data_b x-border x-select x-border" value="{{ row['cbb_types_of_training'] }}" name="cbb_types_of_training" id="cbb_types_of_training" ><br>
                                    <option >{{ row['cbb_types_of_training'] }}</option>
                                    <option>RCU</option>
                                    <option>PCU</option>
                                    <option>NGA Partners</option>
                                </select>
                            </div>
                        </div>
            
                        <!---2--->
                        <div class="x-row x-padding x-container">
                            <div class="x-col l4 x-container x-padding">
                                <label>Topic Of Training</label>
                                <input class="form_data_b x-input x-border" value="{{ row['cbb_topic_of_training'] }}" name="cbb_topic_of_training" id="cbb_topic_of_training" type="text" placeholder="">
                            </div>
                            <div class="x-col l4 x-container x-padding">
                                <span class="">DIP-approved alignment</span>
                                <select class="form_data_b x-border x-select x-border"  value="{{ row['cbb_dip_approved_alignment'] }}" name="cbb_dip_approved_alignment" id="cbb_dip_approved_alignment"><br>
                                    <option >{{ row['cbb_dip_approved_alignment'] }}</option>
                                    <option>Conducted before DIP approval</option>
                                    <option>Conducted after DIP approval</option>
                                    <option>N/A</option>
                                </select>
                            </div>
                            <div class="x-col l4 x-container x-padding">
                                <span class="">Name of DIP</span>
                                <select class="form_data_b x-border x-select x-border" value="{{ row['cbb_name_of_dip'] }}" name="cbb_name_of_dip" id="cbb_name_of_dip" ><br>
                                    <option>{{ row['cbb_name_of_dip'] }}</option>
                                    <option>Conducted before DIP approval</option>
                                    <option>Conducted after DIP approval</option>
                                    <option>N/A</option>
                                </select>
                            </div>		
                        </div>	
            
                        <!---3--->
                        <div class="x-row x-container x-padding">
            
                            <div class="x-col l5 x-container x-padding">
                                <style>table, th, td{border: 1px solid black; border-collapse: collapse;}</style>
                                <table class="x-table x-container x-table-border">
                                    <tr>
                                        <th colspan="2">
                                            <center>ACTIVITY DURATION<br>(Day, Month, Year)</center>
                                        </th>
                                        
                                    </tr>
            
                                    <tr>
                                        <td><center>Start</center></td>
                                        <td><center>End</center></td>
                                    </tr>
            
                                    <tr>
                                        <td><input class="form_data_b x-input x-border" name="cbb_date_start" id="cbb_date_start" value="{{ row['cbb_date_start'] }}" type="date" placeholder=""></td>
                                        <td><input class="form_data_b x-input x-border" name="cbb_date_end" id="cbb_date_end"  value="{{ row['cbb_date_end'] }}" type="date" placeholder=""></td>
                                    </tr>
                                </table>
                            </div>	
                
                            <div class="x-col l4 x-container x-padding">
                                <label>Total Number of Participants</label>
                                <input class="form_data_b x-input x-border" value="{{ row['cbb_total_number_of_participants'] }}" name="cbb_total_number_of_participants" id="cbb_total_number_of_participants" type="Number" placeholder="Input Number">
                            </div>
                            <div class="x-col l3 x-container x-padding">
                                <span class="">Commodity</span>
                                <select class="form_data_b x-border x-select x-border" value="{{ row['cbb_commodity'] }}" id="cbb_commodity" name="cbb_commodity"><br>
                                    <option>{{ row['cbb_commodity'] }}</option>
                                    <option>RCU</option>
                                    <option>PCU</option>
                                    <option>NGA Partners</option>
                                </select>
                            </div>
            
                            <div class="x-row x-container x-padding">
                                <style>table, th, td{border: 1px solid black; border-collapse: collapse;}</style>
                                    <table id="form4_table_update{{row['id']}}" class="x-table x-container x-table-border">
                                        <tr>
                                            <th>
                                                <center><button type="button" style="float: left;" class="btn btn-primary" onclick="add_row({{row['id']}})"><i class="fa-solid fa-circle-plus"></i></button> Venue</center>
                                            </th>
                                            <th>
                                                <center>Name of Resource Person/Facilitator/BDSP<br>(First Name, Middle Name, Last Name)</center>
                                            </th>
                                        </tr>
            
                                        <tbody  id="update_table_">
                                            {% set list1 = row['cbb_venue'].split(',') %}
                                            {% for index in range(list1|length) %}
                                            <tr>
                                                <td><input class="form_data_b x-light-grey x-input" value="{{ row['cbb_venue'].split(',')[index] }}" id="cbb_venue" type="text" name="cbb_venue[]"></td>
                                                <td><input class="form_data_b x-light-grey x-input" value="{{ row['cbb_name_of_resource_person'].split(',')[index] }}" id="cbb_name_of_resource_person" type="text" name="cbb_name_of_resource_person[]"></td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                            </div>
            
                            <div class="x-row x-container x-padding">
                                <style>table, th, td{border: 1px solid black; border-collapse: collapse;}</style>
                                    <table class="x-table x-container x-table-border">
                                        <tr>
                                            <th>
                                                <center>RAPID Actual Budget</center>
                                            </th>
                                            <th colspan="2">
                                                <center>DIP Capbuild Activities fully & partially funded by partners outside RAPID </center>
                                            </th>
                                        </tr>
                                            <td><center>Actual (CY 2022 Onwards e.g., 34,000.00)</center></td>
                                            <td><center>Name of Partner/Organization</center></td>
                                            <td><center>Counterpart Amount<br>(monetize & estimates)</center></td>
            
                                        <tr>
                                            <td><input class="form_data_b x-light-grey x-input" value="{{ row['cbb_rapid_actual_budget'] }}" name="cbb_rapid_actual_budget" id="cbb_rapid_actual_budget" type="text" ></td>
                                            <td><input class="form_data_b x-light-grey x-input" value="{{ row['cbb_dip_capbuild_activities_NPO'] }}" name="cbb_dip_capbuild_activities_NPO" id="cbb_dip_capbuild_activities_NPO" type="text" ></td>
                                            <td><input class="form_data_b x-light-grey x-input" value="{{ row['cbb_dip_capbuild_activities_CA'] }}" name="cbb_dip_capbuild_activities_CA" id="cbb_dip_capbuild_activities_CA" type="text" ></td>
                                        </tr>
                                    </table>
                            </div>
            
                            <div class="x-col l5 x-container x-padding">
                                <span class="">Type of Beneficiaries</span>
                                <select class="form_data_b x-border x-select x-border" value="{{ row['cbb_total_number_of_beneficiaries_per_type'] }}" id="cbb_total_number_of_beneficiaries_per_type" name="cbb_total_number_of_beneficiaries_per_type"><br>
                                    <option >{{ row['cbb_total_number_of_beneficiaries_per_type'] }}</option>
                                    <option>MSME</option>
                                    <option>FO</option>
                                    <option>FARMER</option>
                                </select>
                            </div>
            
                            <div class="x-container x-padding">
                                <style>table, th, td{border: 1px solid black; border-collapse: collapse;}</style>
                                <table class="x-table x-container x-table-border">
                                    <tr>
                                        
                                        <th colspan="3">
                                            <center>Total Number Per Gender</center>
                                        </th>
                                        <th colspan="5">
                                            <center>Total Number Per Sector</center>
                                        </th>
                                        
                                    </tr>
            
                                    <tr>
                                    
                                        <!---gender---->
                                        <td><center>male</center></td>
                                        <td><center>female</center></td>
                                        <td><center>total</center></td>
            
                                        <!---sector---->
                                        <td><center>PWD</center></td>
                                        <td><center>Youth</center></td>
                                        <td><center>IP</center></td>
                                        <td><center>SC</center></td>
                                        <td><center>Total</center></td>
            
                                    </tr>
            
                                    <tr>
                                    <!---gender--->	
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_total_number_per_gender_male" value="{{ row['cbb_total_number_per_gender_male'] }}" type="text" name="cbb_total_number_per_gender_male"></td>
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_total_number_per_gender_female" value="{{ row['cbb_total_number_per_gender_female'] }}" type="text" name="cbb_total_number_per_gender_female"></td>
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_total_number_per_gender_total" value="{{ row['cbb_total_number_per_gender_total'] }}" type="text" name="cbb_total_number_per_gender_total"></td>
            
                                    <!--sector--->
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_total_number_per_sector_pwd" value="{{ row['cbb_total_number_per_sector_pwd'] }}" type="text" name="cbb_total_number_per_sector_pwd"></td>
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_total_number_per_sector_youth" value="{{ row['cbb_total_number_per_sector_youth'] }}"  type="text" name="cbb_total_number_per_sector_youth"></td>
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_total_number_per_sector_ip" value="{{ row['cbb_total_number_per_sector_ip'] }}" type="text" name="cbb_total_number_per_sector_ip"></td>
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_total_number_per_sector_sc" value="{{ row['cbb_total_number_per_sector_sc'] }}"  type="text" name="cbb_total_number_per_sector_sc"></td>
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_total_number_per_sector_total" value="{{ row['cbb_total_number_per_sector_total'] }}" type="text" name="cbb_total_number_per_sector_total"></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="x-container x-padding">
                                <style>table, th, td{border: 1px solid black; border-collapse: collapse;}</style>
                                <table class="x-table x-container x-table-border">
                                    <tr>
                                        
                                        <th colspan="2">
                                            <center>Results of activity (Average)</center>
                                        </th>
                                        <th colspan="2">
                                            <center>Client Feedback Survey </center>
                                        </th>
                                        
                                        
                                    </tr>
            
                                    <tr>
                                    
                                        <td><center>Pre-Test</center></td>
                                        <td><center>Post-Test</center></td>
            
                                        <td><center>Rating</center></td>
                                        <td><center>Comments/ Areas of Improvement</center></td>
            
                                        
                                        
                                    </tr>
            
                                    <tr>	
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_results_of_activity_pre_test" value="{{ row['cbb_results_of_activity_pre_test'] }}" type="text" name="cbb_results_of_activity_pre_test"></td>
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_results_of_activity_post_test" value="{{ row['cbb_results_of_activity_post_test'] }}" type="text" name="cbb_results_of_activity_post_test"></td>
            
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_client_feedback_survey_rating" value="{{ row['cbb_client_feedback_survey_rating'] }}" type="text" name="cbb_client_feedback_survey_rating"></td>
                                        <td><input class="form_data_b x-light-grey x-input" id="cbb_client_feedback_survey_comments_AOI" value="{{ row['cbb_client_feedback_survey_comments_AOI'] }}" type="text" name="cbb_client_feedback_survey_comments_AOI"></td>
                                        
            
                                    </tr>
                                </table>
                            </div>
            
                            <div class="x-row x-container x-padding">
                                <div class="x-col l3 x-container x-padding">	
                                    <label for="avatar">Choose MOVs:</label>
                                    <input type="file" id="cbb_avatar" name="avatar" accept="image/png, image/jpeg, video/mp4">
                                </div>
                            </div>       
       
                        
                    </div>
            
                
          
              </div>
          </div>
            
                
          
              
          </div>
          <div class="modal-footer bg-light">
             <button type="submit" class="btn btn-primary" style="justify-content: right;">Save changes</button>
            <button type="button" id="closebtn" class="btn btn-warning" data-dismiss="modal">Close</button>
      </div>
    </form>

      
      </div>
   
    </div>
  </div>
  
  {% endfor  %}
  <script>
                        

    function add_row(ids){
        println('form4_table_update'+ids)
        var table_org_update = document.getElementById('form4_table_update'+ids);
        println(table_org_update)
        var row = table_org_update.insertRow(1);
        // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
        row.insertCell(0).innerHTML = `<td><input class="form_data_b x-light-grey x-input" id="cbb_venue" type="text" name="cbb_venue[]"></td>`
        row.insertCell(1).innerHTML = `<td><input class="form_data_b x-light-grey x-input" id="cbb_name_of_resource_person" type="text" name="cbb_name_of_resource_person[]"></td>`
        println(table_org_update)
    }
</script>

