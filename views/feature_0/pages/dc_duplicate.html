
		<div class="x-container x-row x-padding">
			<div class="x-container x-padding x-col l2 m2 x-topbar x-border-grey">
				<button class="x-btn x-round x-padding x-orange" onclick="start_scan_dup()">
					Start Scanning Duplicates <b class="fa fa-clone x-text-white"></b>
				</button>
			</div>
			<div class="x-container x-padding x-col l2 m2 x-topbar x-border-green">
				<div class="x-row x-container" id="dup_loading"></div>
			</div>
			<div class="x-container x-padding x-col l2 m2 x-topbar x-border-yellow">
				<div class="x-row x-container" id="dup_res"></div>
			</div>
			<div class="x-container x-padding x-col l2 m2 x-topbar x-border-red">
				<div class="x-row x-container" id="dup_excess"></div>
			</div>
			<div class="x-container x-padding x-col l2 m2 x-topbar x-border-grey">
				<div class="x-row x-container" id="btn_dup"></div>
			</div>
		</div>

		<div id="dup_modal" style="display: none;">
			<div id="ls_dups" class="x-container" style="overflow-y:scroll;height: 60vh;">
				Loading
			</div>
		</div>

		<script type="text/javascript">
			var duplicate_modal = undefined
			function start_scan_dup(){
				$ID("dup_loading").innerHTML = "Loading please wait"
				$ID("dup_res").innerHTML = ""
				$ID('dup_excess').innerHTML =""
				$ID('btn_dup').innerHTML =""
				$send({
					action : "/feature_0/data_clean_duplicates",
					method : POST,
					func : function(_r){
						var res = JSON.parse(_r)
						var total_excess = 0
						for (var i = 0; i < res.length; i++) {
							total_excess+=res[i]['length']
						}
						$ID('dup_res').innerHTML = (`
							<span class='x-center'>
								<b class='x-large'>`+res['length']+`</b><br>
								Unique records found that has a number duplicates 
							</span>
						`)
						$ID('dup_excess').innerHTML = (`
							<span class='x-center'>
								<b class='x-large'>`+total_excess+`</b><br>
								Total of excess entry <i class='x-text-grey'>(entry:#duplicate)</i>
							</span>
						`)
						$ID('btn_dup').innerHTML = (`
							<span>Click to the list of Records</span>
							<button class='x-btn x-green' onclick="view_duplicates()">
								View Duplicate Results
							</button>
						`)
						create_modal_duplicates(res)
					},
					progress : function(e){
						// var response_length = parseFloat(headerMap(e)['total'])
						var response_length = parseFloat(e.total)
						var response_loaded = parseFloat(e.loaded)
						var percent_  = (response_loaded / response_length) * 100;
						var percent_rounded = Math.round(percent_ * 100) / 100
						$ID("dup_loading").innerHTML = (`
							<span>
								Gathered
								<b>`+Math.round(percent_)+`%</b><br>
								<span class="x-small">
									[ `+(response_loaded/1000000).toFixed(1)+" / "+(response_length/1000000).toFixed(1)+` Mb ]<br>
									<i>`+(response_length-response_loaded)+` bytes remaining</i>
								</span>
							</span>
						`);
					}
				})
			}

			function create_modal_duplicates(res_){
				var out_dup = ""
				for (var i = 0; i < res_.length; i++) {
					var in_dup = ""
					for (var x = 0; x < res_[i].length; x++) {
						in_dup +=(`
							<div class="x-row x-hover-red">
								<div class='x-col m10 l10'>
									<b>`+res_[i][x]['name']+`</b> |
									<span><span class='x-text-grey'>Database ID :</span> 
									`+res_[i][x]['db_id']+`</span> |
									<span><span class='x-text-grey'>Inputed By :</span> 
									`+res_[i][x]['inputed']+`</span><br>
									<span><span class='x-text-grey'>Reference :</span> 
									<i class='x-tiny'>`+res_[i][x]['ref_code']+`</i></span>
								</div>
								<div class='x-col m2 l2'>
									<button class='x-right x-btn x-red x-hover-black x-round-large' onclick="del_dup_entry('`+res_[i][x]['db_id']+`','`+res_[i][x]['ref_code']+`')">
										<span class='fa fa-trash'></span>
									</button>
								</div>
							</div>
						`)
					}
					out_dup +=(`
						<div class="x-container x-padding" style='padding-bottom:10px;'>
							<div class="x-card x-container x-hover-pale-red">`+in_dup+`</div>
						</div>
					`)
				}
				$ID('ls_dups').innerHTML = out_dup
				duplicate_modal = $dialog({
					title : "Duplicated Records",
					subtitle : "Below are the list of records having a duplicates of two ore more",
					content : $ID('dup_modal').innerHTML
				})
			}

			function view_duplicates(){
				// duplicate_modal.dialog.style.width = "75vw";
				duplicate_modal.show()
			}

			function del_dup_entry(ids,ref_num){
				$dialog({
					title : "Delete Duplicated Entry",
					type : 'warning',
					subtitle : "You are about to delete one of the duplicate of an entry. Proceed with precautions",
					content : (`<h3>This feature is under development and will available Soon, Stay tuned</h3>`)
				}).show()
			}
		</script>