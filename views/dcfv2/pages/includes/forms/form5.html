{% extends 'layouts/dcf_base.html' %}
{% block title %} Dashboard {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
<title>Form 5</title>
    {% include "includes/sweetalert.html" %}
    <div class="right_col" role="main">
        <div class="row">
    <div class="col-md-12 col-sm-12 x-card  x-light-grey">
        <center>
            <h2 class=" x-container x-padding text-white" style="background-color: #007399;">FORM 5 - MATCHING GRANT IMPLEMENTATION TRACKER</h2>
			<span class="badge" style=" background-color: #334257; color: #ffb366;" id="head_note"></span>
        </center>

        <div class="x-container x-padding">
            <style>
                table,
                th,
                td {
                    border: 1px solid black;
                    border-collapse: collapse;
                }
            </style>
        </div>

	<input class="FORM5_FIELD x-input" type="hidden"  id="id">
        <div class="x-col l3 x-container x-padding">
            <label class="">Implementing Unit:</label>
            <select class="FORM5_FIELD x-border x-select x-border" id="mgit_implementing_unit"
                name="mgit_implementing_unit" required><br>
                <option value="">Choose your option</option>
                <optgroup label="RCU">
                    <option value="8">Region Vlll - Eastern Visayas</option>
                    <option value="9">Region lX - Zamboanga Peninsula</option>
                    <option value="10">Region X - Northern Mindanao</option>
                    <option value="11">Region Xl - Davao Region</option>
                    <option value="12">Region Xll - SOCCSKSARGEN</option>
                    <option value="13">Region Xlll - Caraga</option>
                    <option value="BARMM">BARMM</option>
                </optgroup>
                <optgroup label="PCU">

                    <option>Northern Samar</option>
                    <option>Leyte</option>
                    <option>Southern Leyte</option>
                    <option>Zamboanga del Norte</option>
                    <option>Zamboanga Sibugay</option>
                    <option>Zamboanga del Sur</option>
                    <option>Misamis Oriental</option>
                    <option>Bukidnon</option>
                    <option>Lanao del Norte</option>
                    <option>Davao de Oro</option>
                    <option>Davao Oriental</option>
                    <option>Davao del Norte</option>
                    <option>Davao del Sur</option>
                    <option>Davao Occidental</option>
                    <option>North Cotabato</option>
                    <option>Sultan Kudarat</option>
                    <option>Sarangani</option>
                    <option>Agusan del Norte</option>
                    <option>Agusan del Sur</option>
                    <option>Surigao del Sur</option>
                    <option>Maguindanao</option>
                </optgroup>
                <option style="font-weight: bold;">NGA Partners</option>
            </select>
        </div>

        <div class="x-container x-padding">
            <style>
                table,
                th,
                td {
                    border: 1px solid black;
                    border-collapse: collapse;
                }
            </style>
            <table class="x-table x-container x-table-border">
                <tr>
                    <th rowspan="2">
                        <center><span style="color: #007399;" class="tool" data-tip="DIP name format: Region_DIP Name (example: R8_SC Global)" tabindex="1"><i class="fa fa-info-circle"></i></span> Name Of DIP</center>
                    </th>
                    <th rowspan="2">
                        <center><span style="color: #007399;" class="tool" data-tip="Provide full name of FO/MSME" tabindex="1"><i class="fa fa-info-circle"></i></span> Name of FO/MSME RECIPIENT (type name of FO / MSME)</center>
                    </th>
                    <th rowspan="2">
                        <center><span style="color: #007399;" class="tool" data-tip="Refers to the FO members who will receive intervention thru Matching Grants" tabindex="1"><i class="fa fa-info-circle"></i></span> Total # of FO Member Recipients</center>
                    </th>
                </tr>
                <tr></tr>
                <tr>
                    <!---gender--->
                    <td><input required class="FORM5_FIELD x-light-grey x-input" id="mgit_name_of_dip" type="text"
                            name="mgit_name_of_dip"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_msme_recipient" type="text"
                            name="mgit_msme_recipient"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_member_recipient" type="text"
                            name="mgit_total_member_recipient"></td>
                </tr>
            </table>
        </div>
        <div class="x-row">
            <div class="x-col l4 x-container">
                <span class="">Commodity:</span>
                <select class="FORM5_FIELD x-border x-select x-border" id="mgit_commodity" name="mgit_commodity" required>
                    <option value="">Choose your option</option>
                    <option>Coffee</option>
                    <option>Cacao</option>
                    <option>Coconut</option>
                    <option>PFN</option>
                </select>
                <input type="text" class="FORM5_FIELD hidden-textbox x-input x-border" name="mgit_commodity_others"
                    id="mgit_commodity_others" show-base="mgit_commodity" show-trigger="PFN" placeholder="Please specify">
            </div>
        </div>

        <div class="x-container x-padding">
            <style>
                table,
                th,
                td {
                    border: 1px solid black;
                    border-collapse: collapse;
                }
            </style>
            <table class="x-table x-container x-table-border">
                <tr>
                    <th colspan="2">
                        <center>Total number of FO members by Gender</center>
                    </th>
                    <th colspan="4">
                        <center>Total number of FO members by sectoral group </center>
                    </th>
                </tr>

                <tr>
                    <!---gender---->
                    <td>
                        <center>Male</center>
                    </td>
                    <td>
                        <center>Female</center>
                    </td>

                    <!---SectorG---->
                    <td>
                        <center>PWD</center>
                    </td>
                    <td>
                        <center>Youth</center>
                    </td>
                    <td>
                        <center>IP</center>
                    </td>
                    <td>
                        <center>SC</center>
                    </td>
                </tr>

                <tr>
                    <!---gender--->
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_number_fo_gender_male" type="number"name="mgit_total_number_fo_gender_male"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_number_fo_gender_female" type="number"name="mgit_total_number_fo_gender_female"></td>
                    <!--sectorG--->
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_number_fo_sectoral_pwd" type="number"name="mgit_total_number_fo_sectoral_pwd"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_number_fo_sectoral_youth" type="number"name="mgit_total_number_fo_sectoral_youth"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_number_fo_sectoral_IP" type="number"name="mgit_total_number_fo_sectoral_IP"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_number_fo_sectoral_SC" type="number"name="mgit_total_number_fo_sectoral_SC"></td>
                </tr>
            </table>
        </div>

        <div class="x-row">
            <div class="x-col l4 x-container x-padding">
                <span class="">Type of Investment:</span>
                <select class="FORM5_FIELD x-border x-select x-border" id="mgit_type_of_investment"
                    name="mgit_type_of_investment"><br>
                    <option value="">Choose your option</option>
                    <!--<option disabled>Productive investments</option>
                    <option disabled>Expansion</option>
                    <option disabled>Rehabilitation</option>-->
                    <option>Expansion, Productive investments, Rehabilitation </option>
                    <option>Productive investments, Rehabilitation </option>
                    <option>Expansion, Rehabilitation </option>
                </select>
            </div>
        </div>

        <script>
            $(document).ready(function () {
                $("#prodex, #prodex2, #prodex3, #rehab, #rehab2").hide();
                $("#mgit_type_of_investment").change(function () {
                    $("#prodex, #prodex2, #prodex3, #rehab, #rehab2").hide();
                    var selectedOption = $(this).val();
                    if (selectedOption === "Productive investments" || selectedOption === "Expansion") {
                        $("#prodex, #prodex2, #prodex3").show();
                    } else if (selectedOption === "Rehabilitation") {
                        $("#rehab, #rehab2").show();
                    }
                    else if (selectedOption === "Productive investments, Rehabilitation") {
                        $("#prodex, #prodex2, #prodex3,#rehab, #rehab2").show();
                    }
                    else if (selectedOption === "Expansion, Rehabilitation") {
                        $("#prodex, #prodex2, #prodex3,#rehab, #rehab2").show();
                    }
                    else if (selectedOption === "Expansion, Productive investments, Rehabilitation") {
                        $("#prodex, #prodex2, #prodex3,#rehab, #rehab2").show();
                    }
                });
            });
        </script>

        <div id="prodex" class="x-container x-padding">
            <style>
                table,
                th,
                td {
                    border: 1px solid black;
                    border-collapse: collapse;
                }
            </style>
            <table class="x-table x-container x-table-border">
                <tr>
                    <th>
                        <center>TOTAL OF MGAs based on approved DIP</center>
                    </th>
                    <th>
                        <center>Total of MGAs Signed </center>
                    </th>
                    <th>
                        <center>Total of MGAs not yet signed</center>
                    </th>
                    <th>
                        <center>TOTAL MATCHING GRANT BASED ON APPROVED BUSINESS PLAN (IN PHP)</center>
                    </th>
                </tr>

                <tr>
                    <!--sectorG--->
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_mgas_based_approved_DIP" type="text"
                            name="mgit_total_mgas_based_approved_DIP"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_mgas_signed" type="text"
                            name="mgit_total_mgas_signed"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_mgas_not_yet_signed" type="text"
                            name="mgit_total_mgas_not_yet_signed"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_matching_grant_based_on_approved_business"
                            type="text" name="mgit_total_matching_grant_based_on_approved_business"></td>
                </tr>
            </table>
        </div>

        <div id="prodex2" class="x-container x-padding">
            <style>
                table,
                th,
                td {
                    border: 1px solid black;
                    border-collapse: collapse;
                }
            </style>
            <table class="x-table x-container x-table-border">
                <tr>
                    <th>
                        <center>PREVIOUS MATCHING GRANT AVAILMENT (IN PHP) - FIRST AVAILMENT</center>
                    </th>
                    <th>
                        <center>MATCHING GRANT AVAILMENT AS OF THIS REPORTING PERIOD (IN PHP) and date</center>
                    </th>
                    <th>
                        <center>REMAINING MATCHING GRANT BALANCE (in PHP)</center>
                    </th>
                </tr>

                <tr>
                    <!--sectorG--->
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_pmga_first_availment" type="text"
                            name="mgit_pmga_first_availment"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_mgar_period_date" type="text"
                            name="mgit_mgar_period_date"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_remaining_matching_grant_balance" type="text"
                            name="mgit_remaining_matching_grant_balance"></td>
                </tr>
            </table>
        </div>


        <div id="prodex3" class="x-col l5 x-container x-padding">
            <style>
                table,
                th,
                td {
                    border: 1px solid black;
                    border-collapse: collapse;
                }
            </style>
            <table class="x-table x-container x-table-border">
                <tr>
                    <th colspan="2">
                        <center>INCLUSIVE TIMELINE OF IMPLEMENTATION (based on MGA)</center>
                    </th>
                    <th>
                        <center>TIME ELAPSE (autocalculate: IN REFERENCE TO END DATE OF MG AVAILMENT)</center>
                    </th>
                </tr>

                <tr>
                    <td>
                        <center>Start</center>
                    </td>
                    <td>
                        <center>End</center>
                    </td>
                </tr>

                <tr>
                    <td><input class="FORM5_FIELD x-input x-border" id="mgit_inclusive_timeline_implementation_start" type="date"
                            placeholder="" name="mgit_inclusive_timeline_implementation_start"></td>
                    <td><input class="FORM5_FIELD x-input x-border" id="mgit_inclusive_timeline_implementation_end" type="date"
                            placeholder="" name="mgit_inclusive_timeline_implementation_end"></td>
                    <td><input readonly class="FORM5_FIELD x-light-grey x-input" id="mgit_time_elapse" type="text" name="mgit_time_elapse">
                    </td>
                </tr>
            </table>
        </div>

        <script>
            const startDateInput = document.getElementById('mgit_inclusive_timeline_implementation_start');
            const endDateInput = document.getElementById('mgit_inclusive_timeline_implementation_end');
            const timeElapsedInput = document.getElementById('mgit_time_elapse');

            function calculateTimeElapsed() {
                const startDate = new Date(startDateInput.value);
                const endDate = new Date(endDateInput.value);
                const timeDiff = endDate - startDate;
                const daysElapsed = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
                timeElapsedInput.value = daysElapsed + " days";
            }

            startDateInput.addEventListener('input', calculateTimeElapsed);
            endDateInput.addEventListener('input', calculateTimeElapsed);
        </script>

        <div id="rehab" class="x-container x-padding">
            <style>
                table,
                th,
                td {
                    border: 1px solid black;
                    border-collapse: collapse;
                }
            </style>
            <table class="x-table x-container x-table-border">
                <th>
                    <center>TOTAL BUDGET AS APPROVED IN THE DIP</center>
                </th>
                <th>
                    <center>ACTUAL COST OF PROCUREMENT</center>
                </th>
                <th>
                    <center>SUMMARY OF ACTUAL TOOLS PROCURED</center>
                </th>
                </tr>

                <tr>
                    <!--sectorG--->
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_total_budget_approved_in_the_DIP" type="text"
                            name="mgit_total_budget_approved_in_the_DIP"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_actual_cost_of_procurement" type="text"
                            name="mgit_actual_cost_of_procurement"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_summary_of_actual_tools_procured" type="text"
                            name="mgit_summary_of_actual_tools_procured"></td>
                </tr>
            </table>
        </div>
        <div id="rehab2" class="x-row x-container x-padding">
            <style>
                table,
                th,
                td {
                    border: 1px solid black;
                    border-collapse: collapse;
                }
            </style>
            <table class="x-table x-container x-table-border">
                <tr>
                    <th colspan="2">
                        <center>INCLUSIVE TIMELINE OF IMPLEMENTATION (based on MGA)</center>
                    </th>
                    <th rowspan="2">
                        <center>TIME ELAPSE (autocalculate: in reference tostart and end date)</center>
                    </th>
                    <th rowspan="2">
                        <center>DATE OF DISTRIBUTION/<br>TRAINING</center>
                    </th>
                    <th rowspan="2">
                        <center>REMARKS ON THE DELIVERED TOOLS</center>
                    </th>
                </tr>

                <tr>
                    <td>
                        <center>Start</center>
                    </td>
                    <td>
                        <center>End</center>
                    </td>
                </tr>

                <tr>
                    <td><input class="FORM5_FIELD  x-input x-border" id="mgit_inclusive_timeline_implementation_start1"name="mgit_inclusive_timeline_implementation_start1" type="date" placeholder=""></td>
                    <td><input class="FORM5_FIELD  x-input x-border" id="mgit_inclusive_timeline_implementation_end1"name="mgit_inclusive_timeline_implementation_end1" type="date" placeholder=""></td>
                    <td><input readonly class="FORM5_FIELD  x-light-grey x-input" id="mgit_time_elapse1" type="text"name="mgit_time_elapse1"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_date_of_distribution" type="text"name="mgit_date_of_distribution"></td>
                    <td><input class="FORM5_FIELD  x-light-grey x-input" id="mgit_remarks_on_the_deliverd_tools" type="text"name="mgit_remarks_on_the_deliverd_tools"></td>
                </tr>
            </table>

            <script>
                const startDateInput2 = document.getElementById('mgit_inclusive_timeline_implementation_start1');
                const endDateInput2 = document.getElementById('mgit_inclusive_timeline_implementation_end1');
                const timeElapsedInput2 = document.getElementById('mgit_time_elapse1');

                function calculateTimeElapsed2() {
                    const startDate2 = new Date(startDateInput2.value);
                    const endDate2 = new Date(endDateInput2.value);
                    const timeDiff2 = endDate2 - startDate2;
                    const daysElapsed2 = Math.ceil(timeDiff2 / (1000 * 60 * 60 * 24));
                    timeElapsedInput2.value = daysElapsed2 + " days";
                }
                startDateInput2.addEventListener('input', calculateTimeElapsed2);
                endDateInput2.addEventListener('input', calculateTimeElapsed2);
            </script>
        </div>
        <!-- <div class="x-col l4 x-container x-padding">
            <button data-toggle="modal" data-target="#form5_modalpart" href=""
                style="box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;" type="button" id="btnpart"
                class="x-teal btn"><i class="fa-solid fa-user-plus"></i>&nbsp;&nbsp;Add Participants</button>
        </div> -->


{% if benef|length !=0 %}

<div class="col-md-12 col-sm-12 ">
    <div class="x_panel">
      <div class="x_title">
        <h2>Participants&nbsp;&nbsp;&nbsp;
            <a style="color: #339966;  cursor: pointer;" onclick='goto("/feature_0/link_data_dcf_form_a?&h="+URL_ARGS["id"]+"&i="+URL_ARGS["table"],true)'>
                <span><i class="fa fa-pencil-square-o" style="color:#339966;"></i></span> Edit Participants
            </a> </h2></h2>
        <ul class="nav navbar-right panel_toolbox">
            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">Settings 1</a>
                    <a class="dropdown-item" href="#">Settings 2</a>
                </div>
            </li>
            <li><a class="close-link"><i class="fa fa-close"></i></a></li>
        </ul>
    <div class="clearfix"></div>
</div>
<div class="x_content">
  <div class="row">
      <div class="col-sm-12">
        <div class="card-box table-responsive">
            <p class=" text-muted font-13 m-b-30">
              Farmer's Profile/ Participants/ Beneficiaries/ FO/ MSMEs/ DCF's
            </p>
        <table id="datatable-responsive" class="table table-dark table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>Name / Org Name</th>
                    <th>Sex</th>
                    <th>Birthday</th>
                    <th>Primary Crop (If Applicable)</th>
                    <th>Barangay</th>
                    <th>City/Municipality</th>
                    <th>Province</th>
                    <th>Region</th>
                </tr>
            </thead>
            <tbody>
                {% for parti in benef%}
                    <tr>
                        <td>{{parti['fname']}}</td>
                        <td>{{parti['sex']}}</td>
                        <td>{{parti['farmer_bday']}}</td>
                        <td>{{parti['farmer_primary_crop']}}</td>
                        <td>{{parti['addr_brgy']}}</td>
                        <td>{{parti['addr_city']}}</td>
                        <td>{{parti['addr_prov']}}</td>
                        <td>Region {{parti['addr_region']}}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
</div>
</div>
</div>
    </div>
        {%endif%}   
            <p class="x-right" id="submit_btn_holder">
                <button class="btn btn-primary" type="button" onclick="submit_form('FORM5_FIELD','dcf_matching_grant','/form5_dashboard')">Submit</button>
            </p>
        </div>
    </div>
</div>
			{% include 'formdata_handler.html' %}


<script>
    $onload(function () {
        var record_id = URL_ARGS["id"]
        var table = URL_ARGS["table"]
        load_data(record_id, table, "FORM5_FIELD")
        window.setTimeout(f5_type_inv,1000)
        // submit_form('CLASSNAME_FOR_FIELDS','TABLE_NAME','URL_DASH',)
    })
    function f5_type_inv(){
        triggerChange($ID("mgit_type_of_investment"))
    }
</script>
{% endblock content %}
{% block javascripts %}
{% endblock javascripts %}