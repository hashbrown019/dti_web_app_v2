<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<div class="col-lg-9">
	<section class="section profile">
		<style>
			html, body {
				height: 100%;
				margin: 0;
				padding: 0;
			}
			#embed_page {
				width: 100%;
				height: 100vh; /* Full viewport height */
				border: none;
				display: block;
			}
		</style>
		<div class="rapid_embed_loading">
			<i class="x-text-blue fa-solid fa-spinner fa-spin"></i> Loading...
		</div>
		<iframe 
			style="border-style: none; overflow: hidden; opacity: 0;"
			loading="lazy"
			id="embed_page"
			src="#"
			frameborder="0"
			scrolling="auto"
			onload="iframe_load(this)"
			onloadstart="EMBED_LOAD_START(this)"
			onwaiting="alert()">
			Loading...
		</iframe>

		<script>
			$ID("embed_page").src = "/"+URL_ARGS['u']
			let a_export = function(){alert('PFA not Selected')}
			let a_import = function(){alert('PFA not Selected')}

			function iframe_load (iframe_content){
				EMBED__SCRIPT(iframe_content,formcdashboard)
				EMBED__SCRIPT(iframe_content,EMBED_OUTER_LINK_IFRAME)

				const iframe = document.getElementById('embed_page');
				const loading = document.getElementsByClassName('rapid_embed_loading');
				if (iframe) { iframe.style.opacity = 1; }
				for (let i = 0; i < loading.length; i++) { loading[i].style.display = 'none'; }
			}

			function formcdashboard(_BODY_,obj){
				try{
					var in_url =  (urls)=> {return obj.src.split("/").indexOf(urls)>0}
					if(in_url("formcdashboard") || in_url("cform") || in_url("spreadsheet")){
						_BODY_.getElementsByClassName("main-content")[0].style['margin-left'] = "0px" 
					}
					else if(in_url("profiling_form_a")){
						obj.contentWindow.load_excel_cols()
						a_import = obj.contentWindow.import_farmer_excel
						a_export = obj.contentWindow.export_farmer_excel
					}
				}catch(e){
					warnprintln(e)
				}
			}

			function EMBED_OUTER_LINK_IFRAME(_BODY_, obj) {
			_BODY_.addEventListener('click', function (event) {
				const target = event.target.closest('.EMBED_OUTER_LINK');
				if (target) {
					const altValue = target.getAttribute('alt');
					if (altValue) {
						goto(altValue); 
					}
					event.preventDefault();
				}
			});
		}
		</script>
	</section>
</div>