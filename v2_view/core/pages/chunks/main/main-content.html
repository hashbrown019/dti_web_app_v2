<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- <link href="/static/psalm_static/dcf_static/assets/vendors2/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"> -->
<!-- <link href="/static/psalm_static/dcf_static/assets/build/css/custom.css" rel="stylesheet"> -->
<style>
.tile-stats {
  position: relative;
  display: block;
  margin-bottom: 12px;
  border: 1px solid #E4E4E4;
  -webkit-border-radius: 5px;
  overflow: hidden;
  padding-bottom: 5px;
  -webkit-background-clip: padding-box;
  -moz-border-radius: 5px;
  -moz-background-clip: padding;
  border-radius: 5px;
  background-clip: padding-box;
  background: #FFF;
  -webkit-transition: all 300ms ease-in-out;
  transition: all 300ms ease-in-out; }

.tile-stats:hover .icon i {
  animation-name: tansformAnimation;
  animation-duration: .5s;
  animation-iteration-count: 1;
  color: rgba(58, 58, 58, 0.41);
  animation-timing-function: ease;
  animation-fill-mode: forwards;
  -webkit-animation-name: tansformAnimation;
  -webkit-animation-duration: .5s;
  -webkit-animation-iteration-count: 1;
  -webkit-animation-timing-function: ease;
  -webkit-animation-fill-mode: forwards;
  -moz-animation-name: tansformAnimation;
  -moz-animation-duration: .5s;
  -moz-animation-iteration-count: 1;
  -moz-animation-timing-function: ease;
  -moz-animation-fill-mode: forwards; }

.tile-stats .icon {
  width: 20px;
  height: 20px;
  color: #BAB8B8;
  position: absolute;
  right: 53px;
  top: 22px;
  z-index: 1; }

.tile-stats .icon i {
  margin: 0;
  font-size: 60px;
  line-height: 0;
  vertical-align: bottom;
  padding: 0; }

.tile-stats .count {
  font-size: 20px;
  font-weight: bold;
  line-height: 1.65857143; }

.tile-stats .count, .tile-stats h3, .tile-stats p {
  position: relative;
  margin: 0;
  margin-left: 10px;
  z-index: 5;
  padding: 0; }

.tile-stats h3 {
  color: #BAB8B8;
  font-size: 1.2rem;
}

.tile-stats p {
  margin-top: 5px;
  font-size: 12px; }

.tile-stats > .dash-box-footer {
  position: relative;
  text-align: center;
  margin-top: 5px;
  padding: 3px 0;
  color: #fff;
  color: rgba(255, 255, 255, 0.8);
  display: block;
  z-index: 10;
  background: rgba(0, 0, 0, 0.1);
  text-decoration: none; }

.tile-stats > .dash-box-footer:hover {
  color: #fff;
  background: rgba(0, 0, 0, 0.15); }

.tile-stats > .dash-box-footer:hover {
  color: #fff;
  background: rgba(0, 0, 0, 0.15); }

</style>
<div class="col-lg-9">
	<div class="row">
		<div class="pagetitle">
			<h5 class="card-title">My Dashboard <span>/Create your own dashboard here</span></h5>
		</div>

		<div class="row">
			<div class="btn-group p-0" role="group" aria-label="New Old toggles">
				<button id="btnNEW" type="button" class="btn btn-outline-primary active" onclick="showSection('NEW','OLD')">NEW</button>
				<button id="btnOLD" type="button" class="btn btn-outline-secondary" onclick="showSection('OLD','NEW')">OLD</button>
			</div>
		</div>
		<div class="col-xxl-4 col-md-6" style="display:none">
			<div class="card info-card sales-card">
				<div class="card-body">
					<h5 class="card-title">No Personal Dashboard created</h5>

					<div class="d-flex align-items-center" onclick="module_restricted()">
						<div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
							<i class="ri-add-circle-line"></i>
						</div>
						<div class="ps-3">
							<span class="text-success small pt-1 fw-bold">Create dashboard from Forms and Database</span><br>
						</div>
					</div>
				</div>

			</div>
		</div>
		<div class="row" id="NEW">
			<div class="card">
				<div class="card-body">
					<h5 class="card-title">
						<span>Dashboard - Summary</span>
						<i class="fa fa-spinner fa-spin rapid_dashboardSumm_loading" style="position: absolute; right: 15px; font-size: 30px; color: #0D6EFD;"></i>
					</h5>
					<div class="container">
						<div class="row">
							<hr>
							<h6 class="" style="margin-bottom: 20px; color: #7CA03F!important; font-weight: bold;">
								<img src="/static/psalm_static/assets/img/icons/Sectors_Smallholder Farmer.png" width="30px" style="margin-right:5px;"/>
								SMALL HOLDER FARMERS</h6>
							<hr>
							<div class="col-md-3 col-12">
								<br>
								<table class="table table-striped" style="font-size: 10px;">
									<tbody>
										<tr>
											<th>TOTAL # OF SHFs</th>
											<th class="text-end"><span class="SHF_total">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF MALE</th>
											<th class="text-end"><span class="SHF_total_male">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF FEMALE</th>
											<th class="text-end"><span class="SHF_total_female">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF IP</th>
											<th class="text-end"><span class="SHF_total_ip">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF YOUTH</th>
											<th class="text-end"><span class="SHF_total_youth">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF PWD</th>
											<th class="text-end"><span class="SHF_total_pwd">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF SC</th>
											<th class="text-end"><span class="SHF_total_sc">-</span></th>
										</tr>
									</tbody>
								</table>
								<button onclick="show_adv_filter()" class="rapid_viewAreaFilterForm_btn" style="border: 0px; background: 0; text-decoration: underline; font-size: 12px; font-weight: bold;"><i class="fa fa-filter text-primary"></i> View Area Filter Form</button>
								<br>
							</div>
							<div class="col-md-6 col-12">
								<br>
								<div style="width: 100%; margin: auto;">
									<canvas id="SHF_region_piechart"></canvas>
								</div>
								<br>
							</div>
							<div class="col-md-3 col-12 text-center">
								<br>
								<div class="SHF_Comm_Dashboard"></div>
								<br>
								<!-- <div style="width: 100%; margin: auto;">
									<canvas id="SHF_PC_barchart"></canvas>
								</div> -->
							</div>
						</div>
						<br>
						<hr>
						<div class="row">
							<h6 class="" style="margin-bottom: 20px; color: #2C9196!important; font-weight: bold;">
								<img src="/static/psalm_static/assets/img/icons/Sectors_Farmer Organization.png" width="30px" style="margin-right:5px;"/>
								FARMER ORGANIZATION </h6>
							<hr>
							<div class="col-md-3 col-12">
								<br>
								<table class="table table-striped" style="font-size: 10px;">
									<tbody>
										<tr>
											<th>TOTAL # OF FO's</th>
											<th class="text-end"><span class="FO_total">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF COOP</th>
											<th class="text-end"><span class="FO_total_coop">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF ASSOC</th>
											<th class="text-end"><span class="FO_total_assoc">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF MEMBERS</th>
											<th class="text-end"><span class="FO_total_members">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF MALE</th>
											<th class="text-end"><span class="FO_total_male">-</span></th>
										</tr>
										<tr>
											<th>TOTAL # OF FEMALE</th>
											<th class="text-end"><span class="FO_total_female">-</span></th>
										</tr>
									</tbody>
								</table>
								<br>
								<hr>
								<br>
								<div style="width: 100%; margin: auto;">
									<canvas id="FO_TO_barchart" height="300"></canvas>
								</div>
								<br>
							</div>
							<div class="col-md-6 col-12">
								<br>
								<div style="width: 100%; margin: auto;">
									<canvas id="FO_region_piechart"></canvas>
								</div>
								<br>
							</div>
							<div class="col-md-3 col-12">
								<br>
								<div class="FO_Comm_Dashboard text-center"></div>
								<br>
								<!-- <div style="width: 100%; margin: auto;">
									<canvas id="FO_PC_barchart"></canvas>
								</div> -->
							</div>
						</div>
						<br>
						<hr>
						<div class="row">
							<h6 class="" style="margin-bottom: 20px; color: #ce8e04!important; font-weight: bold;">
								<img src="/static/psalm_static/assets/img/icons/Sectors_MSME.png" width="30px" style="margin-right:5px;"/>MICRO, SMALL, MEDIUM ENTERPRISES </h6>
							<hr>
							<div class="col-md-3 col-12">
								<br>
								<table class="table table-striped" style="font-size: 10px;">
									<tbody>
										<tr>
											<th>TOTAL # OF MSME's</th>
											<th class="text-end"><span class="MSME_total">-</span></th>
										</tr>
									</tbody>
								</table>
								<br>
								<hr>
								<br>
								<div style="width: 100%; margin: auto;">
									<canvas id="MSME_BT_barchart" height="300"></canvas>
								</div>
								<br>
							</div>
							<div class="col-md-6 col-12">
								<br>
								<div style="width: 100%; margin: auto;">
									<canvas id="MSME_region_piechart"></canvas>
								</div>
								<br>
							</div>
							<div class="col-md-3 col-12">
								<br>
								<div class="MSME_Comm_Dashboard text-center"></div>
								<br>
								<!-- <div style="width: 100%; margin: auto;">
									<canvas id="MSME_IC_barchart"></canvas>
								</div> -->
							</div>
						</div>
						<br>
						<hr>
						<div class="row">
							<h6 class="" style="margin-bottom: 20px; color: #ce8e04!important; font-weight: bold;">
								DATA CAPTURE FORM </h6></div>
							<hr>
							<div >
								<ul class="nav nav-tabs" id="myTab" role="tablist">
									<li class="nav-item" role="presentation">
										<button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#f1" type="button" role="tab" aria-controls="home" aria-selected="true">F1</button>
									</li>
									<li class="nav-item" role="presentation">
										<button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#f2" type="button" role="tab" aria-controls="profile" aria-selected="false">F2</button>
									</li>
									<li class="nav-item" role="presentation">
										<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#f3" type="button" role="tab" aria-controls="contact" aria-selected="false">F3</button>
									</li>
									<li class="nav-item" role="presentation">
										<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#f4" type="button" role="tab" aria-controls="contact" aria-selected="false">F4</button>
									</li>
									<li class="nav-item" role="presentation">
										<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#f5" type="button" role="tab" aria-controls="contact" aria-selected="false">F5</button>
									</li>
									<li class="nav-item" role="presentation">
										<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#f6" type="button" role="tab" aria-controls="contact" aria-selected="false">F6</button>
									</li>
									<li class="nav-item" role="presentation">
										<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#f7" type="button" role="tab" aria-controls="contact" aria-selected="false">F7</button>
									</li>
									<li class="nav-item" role="presentation">
										<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#f8" type="button" role="tab" aria-controls="contact" aria-selected="false">F8</button>
									</li>
									<li class="nav-item" role="presentation">
										<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#f9" type="button" role="tab" aria-controls="contact" aria-selected="false">F9</button>
									</li>
									<li class="nav-item" role="presentation">
										<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#f10" type="button" role="tab" aria-controls="contact" aria-selected="false">F10</button>
									</li>
									<li class="nav-item" role="presentation">
										<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#f11" type="button" role="tab" aria-controls="contact" aria-selected="false">F11</button>
									</li>
								</ul>
								<div class="tab-content" id="myTabContent">
									<div class="tab-pane fade show active" id="f1" role="tabpanel" aria-labelledby="home-tab">
										<hr>
										<h5 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F1 - DIP Prep</b></h5>
										<hr>
										<div class="row">
											<!-- <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag">{{dashboard_data.dcf_form1}}</div>
													<h3>Entries</h3>
													<p>Total # of Entries.</p>
												</div>
											</div> -->
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag">{{dashboard_data.dcf_form1male[0]['total_male']}}</div>
													<h3>Male</h3>
													<p>Smallholder Farming Households.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag">{{dashboard_data.dcf_form1female[0]['total_female']}} </div>
													<h3>Total Female</h3>
													<p>Smallholder Farming Households.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag">{{dashboard_data.dcf_form1msme[0]['total_large_entep']}}</div>
													<h3>Large Enterprise</h3>
													<p>Total # of Large Enterprises.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag">{{dashboard_data.dcf_form1msme2[0]['total_medium_entep']}}</div>
													<h3>Medium Enterprises</h3>
													<p>Total # of Medium Enterprises.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag">{{dashboard_data.dcf_form1msme3[0]['total_small_entep']}}</div>
													<h3>Small Enterprises</h3>
													<p>Total # of Small Enterprises.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag">{{dashboard_data.dcf_form1msme4[0]['total_micro_entep']}}</div>
													<h3>Micro Enterprises</h3>
													<p>Total # of Micro Enterprises.</p>
												</div>
											</div>
										</div>
										<hr>
										<div class="row">
											<div class="col-md-6 col-sm-6">
												<div class="card">
													<div class="card-body">
														<div class="card-title">DIPs / Region</div>
														<div class="container">
															<canvas id="DCF_F1_dipbyregion_bar" min-height="350"></canvas>
														</div>
														<div style="text-align: center; font-size: 12px;">
															<p><i class="fa fa-square" style="color:#99e6ff "></i> Approved DIPs: <span id="totalApprovedDipsValue"></span>&nbsp;&nbsp;&nbsp; <i class="fa fa-square" style="color:#33ccff ">&nbsp;&nbsp;&nbsp;</i>Pipeline DIPs: <span id="totalpipelineDipsValue"></span>&nbsp;&nbsp;&nbsp; <br><i class="fa fa-square" style="color:#0099cc "></i> Ongoing DIPs: <span id="totalongoingDipsValue"></span>&nbsp;&nbsp;&nbsp; <i class="fa fa-square" style="color:#ff8080 "></i> Not Started: <span id="totalnotstartedDipsValue"></span></p>
														</div>
													</div>
												</div>
											</div>
											<div class="col-md-6 col-sm-6">
												<div class="card">
													<div class="card-body">
														<div class="card-title">Smallholder Farming Households / Region</div>
														<div class="container">
															<canvas id="DCF_F1_SFHbyregion_bar" min-height="350"></canvas>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="tab-pane fade" id="f2" role="tabpanel" aria-labelledby="profile-tab">
										<hr>
										<h4 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F2 - Market Access Tracker</b></h4>
										<hr>
										<div class="row" >
											<!-- <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag" id="totalEntries">{{ dashboard_data.dcf_form2 }}</div>
													<h3>Total Entries</h3>
												</div>
											</div> -->
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag" id="totalMembers">{{ dashboard_data.dcf_form2sextotal[0]['total_sex2'] | int }}</div>
													<h3>Total Members</h3>
													<p>Total # of FO Members.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag" id="totalMale">{{ dashboard_data.dcf_form2FOmale[0]['total_male2'] | int }}</div>
													<h3>Total Male</h3>
													<p>Total # of FO Members by Sex.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag" id="totalFemale">{{ dashboard_data.dcf_form2FOfemale[0]['total_female2'] | int }}</div>
													<h3>Total Female</h3>
													<p>Total # of FO Members by Sex.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag" id="totalPWD">{{ dashboard_data.dcf_form2FOpwd[0]['total_pwd'] | int }}</div>
													<h3>PWD</h3>
													<p>Total # of FO members by Sector.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag" id="totalYouth">{{ dashboard_data.dcf_form2FOyouth[0]['total_youth'] | int }}</div>
													<h3>Youth</h3>
													<p>Total # of FO members by Sector.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag" id="totalIP">{{ dashboard_data.dcf_form2FOip[0]['total_ip'] | int }}</div>
													<h3>IP</h3>
													<p>Total # of FO members by Sector.</p>
												</div>
											</div>
											<div class="animated flipInY col-lg-3 col-md-3 col-sm-6 ">
												<div class="tile-stats" style="border-radius: 15px;">
													<div class="count _money_tag" id="totalSC">{{ dashboard_data.dcf_form2FOsc[0]['total_sc'] | int }}</div>
													<h3>SC</h3>
													<p>Total # of FO members by Sector.</p>
												</div>
											</div>
										</div>
									</div>
									<div class="tab-pane fade" id="f3" role="tabpanel" aria-labelledby="contact-tab">
										<hr>
										<h4 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F3 - BDSP</b></h4>
										<hr>
										<div class="row">
											<div class="col-md-6 col-sm-6">
												<div class="card">
													<div class="card-body">
														<div class="card-title">Philgeps Registered</div>
														<div class="container">
															<canvas id="DCF_F3_philgeps_registered" min-height="350"></canvas>
														</div>
														<!-- <div style="text-align: center;">
															<p><i class="fa fa-square" style="color:#cc3300 "></i> Agri-technical: {{dashboard_data.form3_agri[0]['total_agri']}}&nbsp;&nbsp;&nbsp; <i class="fa fa-square" style="color:#cfccc9 "></i> Entrepreneurial: {{dashboard_data.form3_entrep[0]['total_entrep']}}&nbsp;&nbsp;&nbsp;<i class="fa fa-square" style="color:#669999 "></i> Extension Service: {{dashboard_data.form3_extserv[0]['total_extserv']}}&nbsp;&nbsp;&nbsp;<i class="fa fa-square" style="color:#976699 "></i> Organizational: {{dashboard_data.form3_org[0]['total_org']}}>
														</div> -->
													</div>
												</div>
											</div>
											<div class="col-md-6 col-sm-6">
												<div class="card">
													<div class="card-body">
														<div class="card-title">Type of BDSP</div>
														<div class="container">
															<canvas id="DCF_F3_typeofbdsp" min-height="350"></canvas>
														</div>
														<div style="text-align: center;">
															<p><i class="fa fa-square" style="color:#009999 "></i> Individual: {{dashboard_data.form3indiv[0]['totalindiv']}} &nbsp;&nbsp;&nbsp; <i class="fa fa-square" style="color:#666699 "></i> Organizational/Firm: {{dashboard_data.form3orgfirm[0]['totalorgfirm']}}</p>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="tab-pane fade" id="f4" role="tabpanel" aria-labelledby="contact-tab">
										<hr>
										<h4 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F4 - CapBuild</b></h4>
										<hr>
									</div>
									<div class="tab-pane fade" id="f5" role="tabpanel" aria-labelledby="contact-tab">
										<hr>
										<h4 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F5 - Investment Tracker</b></h4>
										<hr>
									</div>
									<div class="tab-pane fade" id="f6" role="tabpanel" aria-labelledby="contact-tab">
										<hr>
										<h4 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F6 - Product Dev</b></h4>
										<hr>
									</div>
									<div class="tab-pane fade" id="f7" role="tabpanel" aria-labelledby="contact-tab">
										<hr>
										<h4 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F7 - Trade Promotion</b></h4>
										<hr>
									</div>
									<div class="tab-pane fade" id="f8" role="tabpanel" aria-labelledby="contact-tab">
										<hr>
										<h4 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F8 - FMI</b></h4>
										<hr>
									</div>
									<div class="tab-pane fade" id="f9" role="tabpanel" aria-labelledby="contact-tab">
										<hr>
										<h4 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F9 - Enablers Activity</b></h4>
										<hr>
									</div>
									<div class="tab-pane fade" id="f10" role="tabpanel" aria-labelledby="contact-tab">
										<hr>
										<h4 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F10 - Negosyo Center</b></h4>
										<hr>
									</div>
									<div class="tab-pane fade" id="f11" role="tabpanel" aria-labelledby="contact-tab">
										<hr>
										<h4 class="text-primary" style="margin-top: 20px; margin-left: 5px;"><b>F11 - Access to Finance</b></h4>
										<hr>
									</div>
								</div>
							</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="row d-none" id="OLD">
		<div class="card">
			<div class="card-body">
				<h5 class="card-title">PF/DCF Dashboard<span>/ generic dashboard</span></h5>

				<ul class="nav nav-tabs nav-tabs-bordered" id="borderedTab" role="tablist">
					<li class="nav-item" role="presentation">
						<button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#bordered-home"
							type="button" role="tab" aria-controls="home" aria-selected="false" tabindex="-1"
							onclick="$ID('dash_core_embed').src='/dcf_dashboard_embed';">Data Capture Forms</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#bordered-profile"
							type="button" role="tab" aria-controls="profile" aria-selected="false" tabindex="-1"
							onclick="$ID('dash_core_embed').src='/profiling_form_a/e?page=dashboard';">Profiling Form A</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#bordered-contact"
							type="button" role="tab" aria-controls="contact" aria-selected="true"
							onclick="$ID('dash_core_embed').src='/formbembed/e?page=dash_conso';">Profiling Form B</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="harv-tab" data-bs-toggle="tab" data-bs-target="#bordered-harv"
							type="button" role="tab" aria-controls="harv" aria-selected="true"
							onclick="$ID('dash_core_embed').src='/formcdashboard';">Profiling Form C</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="others-tab" data-bs-toggle="tab" data-bs-target="#bordered-others"
							type="button" role="tab" aria-controls="others" aria-selected="true"
							onclick="$ID('dash_core_embed').src='';">Others</button>
					</li>
				</ul>
				<div class="tab-content pt-2" id="borderedTabContent">
					<div class="pagetitle">
						<iframe id="dash_core_embed" src="" frameborder="0" scrolling="no"
						style="width: 100%; height: 100%;" onload="EMBED__SCRIPT(this, formcdashboard)"></iframe>
					</div>
				</div>
			</div>
		</div>
	</div>

	{% include 'advance_filter_a_dashboard.html' %}

	<script type="text/javascript">
		function formcdashboard(_BODY_, obj) {
			try {
				const in_url = (urls) => obj && obj.src && obj.src.split("/").indexOf(urls) >= 0;
				if (in_url('formcdashboard') || in_url('dcf_dashboard_embed')) {
					if (_BODY_ && _BODY_.getElementsByClassName("main-content")[0]) {
						_BODY_.getElementsByClassName("main-content")[0].style['margin-left'] = "0px";
					}
				}
				if (in_url('formbembed')) {
					if (obj && obj.contentWindow && obj.contentWindow.$ID) {
						const main_cont = obj.contentWindow.$ID("TOP_TITLE");
						if (main_cont) main_cont.style['padding-top'] = "1px";
					}
				}
			} catch (e) {
				console.warn(e);
			}
		}

		$(document).ready(function(){
			
			$.ajax({
                type    : 'POST',
                url     : '/dashboard_summary',
                cache   : false,
                async   : false,
                // headers: {
                //     'X-CSRFToken': $('meta[name="csrf-token"]').attr('content') 
                // },
                // data    : formData,
                success : function(response){
                    console.log('entered here!');
					console.log(response);

					var chart_data_shf 		= response.SHF['SHF_byRegion'];
					var chart_data_shf_pc 	= response.SHF['SHF_PC_data'];
					var chart_data_fo  		= response.FO['FO_byRegion'];
					var chart_data_fo_to  	= response.FO['FO_byOrgType'];
					var chart_data_fo_pc  	= response.FO['FO_PC_data'];
					var chart_data_msme  	= response.MSME['MSME_byRegion'];
					var chart_data_msme_pc  = response.MSME['MSME_PC_data'];
					var chart_data_msme_ic  = response.MSME['MSME_IC_data'];

					// Small Holder Farmers - Total List
					$('.SHF_total').html(Money(response.SHF['SHF_Total']));
					$('.SHF_total_male').html(Money(response.SHF['SHF_Total_Male']));
					$('.SHF_total_female').html(Money(response.SHF['SHF_Total_Female']));
					$('.SHF_total_ip').html(Money(response.SHF['SHF_Total_IP']));
					$('.SHF_total_youth').html(Money(response.SHF['SHF_Total_Youth']));
					$('.SHF_total_pwd').html(Money(response.SHF['SHF_Total_PWD']));
					$('.SHF_total_sc').html(Money(response.SHF['SHF_Total_SC']));

					$('.SHF_Comm_Dashboard').html(getCommodityDashboard("# of SHF's / Commodity",chart_data_shf_pc['data'][0],chart_data_shf_pc['data'][1],chart_data_shf_pc['data'][2],chart_data_shf_pc['data'][3],chart_data_shf_pc['data'][4]));
					$('.FO_Comm_Dashboard').html(getCommodityDashboard("# of FO's / Commodity",chart_data_fo_pc['data'][0],chart_data_fo_pc['data'][1],chart_data_fo_pc['data'][2],chart_data_fo_pc['data'][3],chart_data_fo_pc['data'][4]));
					$('.MSME_Comm_Dashboard').html(getCommodityDashboard("# of MSME's / Commodity",chart_data_msme_ic['data'][0],chart_data_msme_ic['data'][1],chart_data_msme_ic['data'][2],chart_data_msme_ic['data'][3],chart_data_msme_ic['data'][4]));

					// Farmer Organization - Total List
					$('.FO_total').html(Money(response.FO['FO_Total']));
					$('.FO_total_coop').html(Money(response.FO['FO_Total_Coop']));
					$('.FO_total_assoc').html(Money(response.FO['FO_Total_Assoc']));
					$('.FO_total_members').html(Money(response.FO['FO_Total_Members']));
					$('.FO_total_male').html(Money(response.FO['FO_Total_Male']));
					$('.FO_total_female').html(Money(response.FO['FO_Total_Female']));

					// MSME - Total List
					$('.MSME_total').html(Money(response.MSME['MSME_Total']));
					
					
					var ctx_SHF = document.getElementById('SHF_region_piechart').getContext('2d');
					// var ctx_SHF_PC = document.getElementById('SHF_PC_barchart').getContext('2d');
					var ctx_FO = document.getElementById('FO_region_piechart').getContext('2d');
					var ctx_FO_TO = document.getElementById('FO_TO_barchart').getContext('2d');
					// var ctx_FO_PC = document.getElementById('FO_PC_barchart').getContext('2d');
					var ctx_MSME = document.getElementById('MSME_region_piechart').getContext('2d');
					var ctx_MSME_PC = document.getElementById('MSME_BT_barchart').getContext('2d');
					// var ctx_MSME_IC = document.getElementById('MSME_IC_barchart').getContext('2d');

					// SHF Chart - Pie
					const chartSHF = new Chart(ctx_SHF, {
						type: 'pie',
						data: {
							labels: chart_data_shf.labels,
							datasets: [{
								label: '',
								data: chart_data_shf.data,
								backgroundColor: chart_data_shf.background_colors,
								hoverOffset: 4
							}]
						},
						options: {
							responsive: true,
							plugins: {
								legend: {
									position: 'bottom',
									labels: {
										boxWidth: 15,
      									boxHeight: 15,
										font: {
											size: 12
										}
									}
								},
								title: {
									display: true,
									text: "SHF's / Region"
								},
								tooltip: {
									callbacks: {
										label: function(context) {
											return context.parsed+"%";
										}
									}
								}
							}
						}
					});


					// ===========================================================
					// SHF Commodities - Bar Chart
					// ===========================================================
					// var chartSHF_PC = new Chart(ctx_SHF_PC, {
					// 	type: 'bar',
					// 	data: {
					// 		labels: chart_data_shf_pc.labels,
					// 		datasets: [{
					// 			label: 'SHF / Commodity',
					// 			data: chart_data_shf_pc.data,
					// 			backgroundColor: chart_data_shf_pc.background_colors,
					// 			borderColor: '#8D5630',
					// 			borderWidth: 1
					// 		}]
					// 	},
					// 	options: {
					// 		title: {
					// 			display: true,
					// 			text: "SHF's / Region"
					// 		},
					// 		scales: {
					// 			y: {
					// 				beginAtZero: true
					// 			}
					// 		}
					// 	}
					// });
					
					// FO Chart - Pie
					const chartFO = new Chart(ctx_FO, {
						type: 'pie',
						data: {
							labels: chart_data_fo.labels,
							datasets: [{
								label: '',
								data: chart_data_fo.data,
								backgroundColor: chart_data_fo.background_colors,
								hoverOffset: 4
							}]
						},
						options: {
							responsive: true,
							plugins: {
								legend: {
									position: 'bottom',
									labels: {
										boxWidth: 15,
      									boxHeight: 15,
										font: {
											size: 12
										}
									}
								},
								title: {
									display: true,
									text: "FO's / Region"
								},
								tooltip: {
									callbacks: {
										label: function(context) {
											return context.parsed+"%";
										}
									}
								}
							}
						}
					});

					var chartFO_TO = new Chart(ctx_FO_TO, {
						type: 'bar',
						data: {
							labels: chart_data_fo_to.labels,
							datasets: [{
								label: "# of Members / Type of FO's",
								data: chart_data_fo_to.data,
								backgroundColor: chart_data_fo_to.background_colors,
								borderColor: '#8D5630',
								borderWidth: 1
							}]
						},
						options: {
							title: {
								display: true,
								text: "# of Members / Type of FO's"
							},
							scales: {
								y: {
									beginAtZero: true
								}
							}
						}
					});

					// ===========================================================
					// FO Commodities - Bar Chart
					// ===========================================================
					// var chartFO_PC = new Chart(ctx_FO_PC, {
					// 	type: 'bar',
					// 	data: {
					// 		labels: chart_data_fo_pc.labels,
					// 		datasets: [{
					// 			label: "# of FO's / Commodity",
					// 			data: chart_data_fo_pc.data,
					// 			backgroundColor: chart_data_fo_pc.background_colors,
					// 			borderColor: '#8D5630',
					// 			borderWidth: 1
					// 		}]
					// 	},
					// 	options: {
					// 		scales: {
					// 			y: {
					// 				beginAtZero: true
					// 			}
					// 		}
					// 	}
					// });

					// MSME Chart - Pie
					const chartMSME = new Chart(ctx_MSME, {
						type: 'pie',
						data: {
							labels: chart_data_msme.labels,
							datasets: [{
								label: '',
								data: chart_data_msme.data,
								backgroundColor: chart_data_msme.background_colors,
								hoverOffset: 4
							}]
						},
						options: {
							responsive: true,
							plugins: {
								legend: {
									position: 'bottom',
									labels: {
										boxWidth: 15,
      									boxHeight: 15,
										font: {
											size: 12
										}
									}
								},
								title: {
									display: true,
									text: "MSME's / Region"
								},
								tooltip: {
									callbacks: {
										label: function(context) {
											return context.parsed+"%";
										}
									}
								}
							}
						}
					});

					var chartMSME_PC = new Chart(ctx_MSME_PC, {
						type: 'bar',
						data: {
							labels: chart_data_msme_pc.labels,
							datasets: [{
								label: "MSME's / Asset Size",
								data: chart_data_msme_pc.data,
								backgroundColor: chart_data_msme_pc.background_colors,
								borderColor: '#8D5630',
								borderWidth: 1
							}]
						},
						options: {
							scales: {
								y: {
									beginAtZero: true
								}
							}
						}
					});

					// ===========================================================
					// MSME Commodities - Bar Chart
					// ===========================================================
					// var chartMSME_IC = new Chart(ctx_MSME_IC, {
					// 	type: 'bar',
					// 	data: {
					// 		labels: chart_data_msme_ic.labels,
					// 		datasets: [{
					// 			label: "# of MSME's / Commodity",
					// 			data: chart_data_msme_ic.data,
					// 			backgroundColor: chart_data_msme_ic.background_colors,
					// 			borderColor: '#8D5630',
					// 			borderWidth: 1
					// 		}]
					// 	},
					// 	options: {
					// 		scales: {
					// 			y: {
					// 				beginAtZero: true
					// 			}
					// 		}
					// 	}
					// });

					setTimeout(function(){
						$('.rapid_dashboardSumm_loading').addClass('d-none');
					},200);
                },
                error : function(err) {
                    alert(err.statusText);
                }
            });

			$('.rapid_viewAreaFilterForm_btn').click(function(){
				$('body').addClass('toggle-sidebar');
			});

			function getCommodityDashboard(title,cacao,coconut,coffee,pfn,untagged){
				var html = "";
				html += 	'<small style="display: block; margin-bottom: 10px; color:#666666;"><b>'+title+'</b></small>';
				html += 	'<div class="row">';
				html += 		'<div class="col-6">';
				html += 			'<div class="card card-stats" style="margin-bottom: 15px!important; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">';
				html += 				'<div class="card-body" style="padding: 10px; background: rgb(242 166 32 / 40%);">';
				html += 					'<div class="icon icon-shape text-center" style="margin-top: 10px; ">';
				html += 						'<img src="/static/psalm_static/assets/img/icons/Commodities_Cacao.png" style="width: 80%;" class="img-fluid" loading="lazy">';
				html += 					'</div>';
				html += 					'<h5 class="card-title text-uppercase text-muted mb-0 text-center" style="font-size:0.7em; margin: 0px; padding: 0px; margin-top: 10px; color: #EF8D22 !important;">Cacao</h5>';
				html += 					'<span class="d-block h1 font-weight-bold mb-0 text-center SHF_comm_cacao" style="font-size: 1em;">'+Money(cacao)+'</span>';
				html += 				'</div>';
				html += 			'</div>';
				html += 		'</div>';
				html += 		'<div class="col-6">';
				html += 			'<div class="card card-stats" style="margin-bottom: 15px!important; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">';
				html += 				'<div class="card-body" style="padding: 10px; background: rgb(124 160 102 / 40%);;">';
				html += 					'<div class="icon icon-shape text-center" style="margin-top: 10px;">';
				html += 						'<img src="/static/psalm_static/assets/img/icons/Commodities_Coconut.png" style="width: 80%;" class="img-fluid" loading="lazy">';
				html += 					'</div>';
				html += 					'<h5 class="card-title text-uppercase text-muted mb-0 text-center" style="font-size:0.7em; margin: 0px; padding: 0px; margin-top: 10px; color: #6D8C31 !important;">Coconut</h5>';
				html += 					'<span class="d-block h1 font-weight-bold mb-0 text-center SHF_comm_coconut" style="font-size: 1em;">'+Money(coconut)+'</span>';
				html += 				'</div>';
				html += 			'</div>';
				html += 		'</div>';
				html += 		'<div class="col-6">';
				html += 			'<div class="card card-stats" style="margin-bottom: 15px!important; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">';
				html += 				'<div class="card-body" style="padding: 10px; background: rgb(179 24 0 / 30%);">';
				html += 					'<div class="icon icon-shape text-center" style="margin-top: 10px;">';
				html += 						'<img src="/static/psalm_static/assets/img/icons/Commodities_Coffee.png" style="width: 80%;" class="img-fluid" loading="lazy">';
				html += 					'</div>';
				html += 					'<h5 class="card-title text-uppercase text-muted mb-0 text-center" style="font-size:0.7em; margin: 0px; padding: 0px; margin-top: 10px; color: #9E1204!important;">Coffee</h5>';
				html += 					'<span class="d-block h1 font-weight-bold mb-0 text-center SHF_comm_coffee" style="font-size: 1em;">'+Money(coffee)+'</span>';
				html += 				'</div>';
				html += 			'</div>';
				html += 		'</div>';
				html += 		'<div class="col-6">';
				html += 			'<div class="card card-stats" style="margin-bottom: 15px!important; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">';
				html += 				'<div class="card-body" style="padding: 10px; background:rgb(29 168 168 / 30%);">';
				html += 					'<div class="icon icon-shape text-center" style="margin-top: 10px;">';
				html += 						'<img src="/static/psalm_static/assets/img/icons/Commodities_PFN.png" style="width: 80%;" class="img-fluid" loading="lazy">';
				html += 					'</div>';
				html += 					'<h5 class="card-title text-uppercase text-muted mb-0 text-center" style="font-size:0.7em; margin: 0px; padding: 0px; margin-top: 10px; color: #189B97 !important;">PFN</h5>';
				html += 					'<span class="d-block h1 font-weight-bold mb-0 text-center SHF_comm_pfn" style="font-size: 1em;">'+Money(pfn)+'</span>';
				html += 				'</div>';
				html += 			'</div>';
				html += 		'</div>';
				html += 		'<p class="text-center" style="font-size:0.8em;">UNTAGGED : <b>'+Money(untagged)+'</b></p>';
				html += 	'</div>';

				return html;
			}

			if ($('#DCF_F1_dipbyregion_bar').length) {
				var _labelsrcu = [];
				var approved_dips = [];
				var pipeline_dips = [];
				var ongoing_dips = [];
				var not_started = [];	
				// Sample data
				{% for dip in dashboard_data.dips_list %}
				var dipData = {
					label: '{{dip}}',
					approve: '{{dashboard_data.dips_list[dip]["approve"]}}',
					pipeline: '{{dashboard_data.dips_list[dip]["pipeline"]}}',
					ongoing: '{{dashboard_data.dips_list[dip]["ongoing"]}}',
					not_started: '{{dashboard_data.dips_list[dip]["not_started"]}}',
				};		
				// Add region to each data entry in _labelsrcu
				var regions = ['RCU'];
				regions.forEach(function(region) {
					var regionData = Object.assign({}, dipData, { label: region + ' ' + dipData.label });
					_labelsrcu.push(regionData.label);
					approved_dips.push(regionData.approve);
					pipeline_dips.push(regionData.pipeline);
					ongoing_dips.push(regionData.ongoing);
					not_started.push(regionData.not_started);
				});
				{% endfor %}
				var totalApprovedDips = approved_dips.reduce(function(acc, val) {
					return acc + parseFloat(val);
				}, 0);
				var totalpipelineDips = pipeline_dips.reduce(function(acc, val) {
					return acc + parseFloat(val);
				}, 0);
				var totalongoingDips = ongoing_dips.reduce(function(acc, val) {
					return acc + parseFloat(val);
				}, 0);
				var totalnotstartedDips = not_started.reduce(function(acc, val) {
					return acc + parseFloat(val);
				}, 0);
				document.getElementById('totalApprovedDipsValue').innerText = totalApprovedDips.toFixed(0);
				document.getElementById('totalpipelineDipsValue').innerText = totalpipelineDips.toFixed(0);
				document.getElementById('totalongoingDipsValue').innerText = totalongoingDips.toFixed(0);
				document.getElementById('totalnotstartedDipsValue').innerText = totalnotstartedDips.toFixed(0);
				var ctx = document.getElementById("DCF_F1_dipbyregion_bar");
				var DCF_F1_dipbyregion_bar = new Chart(ctx, {
					type: 'bar',
					data: {
						labels: _labelsrcu,
						datasets: [{
							label: 'Approved DIPs',
							backgroundColor: "#99e6ff",
							data: approved_dips
						}, {
							label: 'Pipeline DIPs',
							backgroundColor: "#33ccff",
							data: pipeline_dips
						},{
							label: 'Ongoing DIPs',
							backgroundColor: "#0099cc",
							data: ongoing_dips
						},{
							label: 'Not Started',
							backgroundColor: "#ff8080",
							data: not_started
						}]
					},
					options: {
						scales: {
							yAxes: [{
								ticks: {
									beginAtZero: true
								}
							}]
						},
						plugins: {
							legend: {
								display: false
							}
						}
					}
				});
			}

			if ($('#DCF_F1_SFHbyregion_bar').length) {
				var tooltips = [];
				var xValuesbar = [];
				var yValuesbar = [];
				var label_ = [];
				var all_perc = []
				var barColorsbar = ["red", "green", "blue", "orange", "brown", "yellow", "violet", "black"];
				var over_all = parseInt('{{dashboard_data.dcf_form1sextotal[0]["total_sex"] | int}}')
				// Sample data
				{% for dip in dashboard_data.dip_sex_group_per_region %}
				xValuesbar.push('RCU: ' + '{{dip}}');
				var rcu_total = parseInt('{{dashboard_data.dip_sex_group_per_region[dip]["total_bene"]}}')
				// var rcu_total = parseInt('{{dashboard_data.dip_sex_group_per_region[dip]["all_total"]["total_sex"]}}')
				var perc = ((rcu_total / over_all) * 100).toFixed(2)
				// yValuesbar.push(perc);
				all_perc.push(perc);
				yValuesbar.push(rcu_total);
				label_.push(rcu_total)
				tooltips.push([
					'Total with sex/tagged: ' +'{{dashboard_data.dip_sex_group_per_region[dip]["all_total"]["total_sex"]}}',
					'Total: ' +money('{{dashboard_data.dip_sex_group_per_region[dip]["total_bene"]|int}}'),
					' ',
					'Male: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["male"]["total"]}}',
					'Youth: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["male"]["youth"]}}',
					'IP: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["male"]["ip"]}}',
					'PWD: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["male"]["pwd"]}}',
					'--------------',
					'Female: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["female"]["total"]}}',
					'Youth: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["female"]["youth"]}}',
					'IP: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["female"]["ip"]}}',
					'PWD: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["female"]["pwd"]}}',
					'--------------',
					'Untagged: ' + '{{(dashboard_data.dip_sex_group_per_region[dip]["total_bene"]-dashboard_data.dip_sex_group_per_region[dip]["female"]["total"]+dashboard_data.dip_sex_group_per_region[dip]["male"]["total"])|int}}',
					'--------------',
					'Overall Total',
					'Youth: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["all_total"]["total_youth"]}}',
					'IP: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["all_total"]["total_ip"]}}',
					'PWD: ' + '{{dashboard_data.dip_sex_group_per_region[dip]["all_total"]["total_pwd"]}}',
					])
				{% endfor %}
				var ctx = document.getElementById("DCF_F1_SFHbyregion_bar");
				var DCF_F1_SFHbyregion_bar = new Chart(ctx, {
					type: 'bar',
					data: {
						labels: xValuesbar,
						tooltip_label:tooltips,
						datasets: [{
							backgroundColor: barColorsbar,
							data: yValuesbar,
							labels : label_
						}]
					},
					options: {
						tooltips: {
							callbacks: {
								label: function (tooltipItem, data) {
								// Display only the percentage value without .00 in the tooltip
									println(tooltipItem)
									return data.tooltip_label[tooltipItem.index];
								},
							},
						displayColors: false, // Set to false to hide the color squares in the tooltip
						},
						plugins: {
							legend: {
								display: false
							}
						}
					},
				});
			}

			if ($('#DCF_F3_philgeps_registered').length) {
				var xValues2 = [
					'Agri-technical: ' + {{dashboard_data.form3_agri[0]['total_agri']}},
					'Entrepreneurial: ' + {{dashboard_data.form3_entrep[0]['total_entrep']}},
					'Extension Service: ' + {{dashboard_data.form3_extserv[0]['total_extserv']}},
					'Organizational: ' + {{dashboard_data.form3_org[0]['total_org']}}
				];

				var yValues2 = [
					{{dashboard_data.form3_agri[0]['total_agri']}},
					{{dashboard_data.form3_entrep[0]['total_entrep']}},
					{{dashboard_data.form3_extserv[0]['total_extserv']}},
					{{dashboard_data.form3_org[0]['total_org']}}
					// {{total_untagged}},
				];
				var barColors = ['#cc3300', '#cfccc9', '#669999', '#976699'];
				var total = yValues2.reduce((a, b) => a + b, 0);
				var percentageValues = yValues2.map((value) => ((value / total) * 100).toFixed(2));
				var ctx = document.getElementById("DCF_F3_philgeps_registered");
				var data = {
					datasets: [{
						data: yValues2,
						backgroundColor: barColors,
						label: 'My dataset' // for legend
					}],
					labels: xValues2
				};
				
				var DCF_F3_philgeps_registered = new Chart(ctx, {
					data: data,
					type: 'pie',
					options: {
						plugins: {
							datalabels: {
								color: 'white',
								formatter: (value, context) => {
									return percentageValues[context.dataIndex] + '%';
								}
							}
						},
						tooltips: {
							callbacks: {
								label: function (tooltipItem, data) {
									var label = data.labels[tooltipItem.index];
									var value = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];
									var percentage = percentageValues[tooltipItem.index] + '%';
									return `${label} (${percentage})`;
								},
							},
						},
					},
				});
			}


			if ($("#DCF_F3_typeofbdsp").length) e = document.getElementById("DCF_F3_typeofbdsp"), new Chart(e, {
				type: "bar",
				data: {
					labels: ["Individual", "Organizational/Firm"],
					datasets: [{
					label: "Total",
					backgroundColor:  ["#009999", "#666699"],
					data: [{{dashboard_data.form3indiv[0]['totalindiv']}}, {{dashboard_data.form3orgfirm[0]['totalorgfirm']}}]
					},]
				},
				options: {
					scales: {
						yAxes: [{
							ticks: {
								beginAtZero: !0
								}
							}]
						}
					},
					plugins: {
						legend: {
							display: false
						}
					}
				});


		});

		function showSection(showId, hideId) {
		const showEl = document.getElementById(showId);
		const hideEl = document.getElementById(hideId);

		if (showEl) {
			showEl.classList.remove('d-none');
			showEl.style.display = '';
		}
		if (hideEl) {
			hideEl.classList.add('d-none');
			hideEl.style.display = 'none';
		}

		// Toggle button active states
		const btnNEW = document.getElementById('btnNEW');
		const btnOLD = document.getElementById('btnOLD');
		if (btnNEW) btnNEW.classList.toggle('active', showId === 'NEW');
		if (btnOLD) btnOLD.classList.toggle('active', showId === 'OLD');

		// Only load OLD dashboard once
		if (showId === 'OLD') {
			const iframe = document.getElementById('dash_core_embed');
			if (iframe && !iframe.dataset.loaded) {
				iframe.src = "/dcf_dashboard_embed"; // Load once
				iframe.dataset.loaded = "true"; // Prevent reloading
			}
		}
	}
	</script>
</div>
